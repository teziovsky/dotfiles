#!/usr/bin/env bash

# File based on mathiasbynens and kentcdodds .macos files!
# mathiasbynens â€” https://github.com/mathiasbynens/dotfiles/blob/master/.macos
# kentcdodds â€” https://github.com/kentcdodds/dotfiles/blob/master/.macos

# Run without downloading:
# curl https://raw.githubusercontent.com/teziovsky/dotfiles/main/.install_macos/.1_developer | bash
# Close any open System Preferences panes, to prevent them from overriding
# settings weâ€™re about to change
osascript -e 'tell application "System Preferences" to quit'

# Ask for the administrator password upfront
sudo -v

# Keep-alive: update existing `sudo` time stamp until `.1_dotfiles` has finished
while true; do
  sudo -n true
  sleep 60
  kill -0 "$$" || exit
done 2>/dev/null &

###############################################################################
# Tezivosky's Customizations                                                  #
###############################################################################

echo -e "\n\n"
echo "##########################################"
echo -e "\nHello $(whoami)! Let's set up your dotfiles! ðŸ”¥\n"
echo "##########################################"

# Create developer path
echo -e "\n"
echo "Creating developer path..."
echo "------------------------------------------------"

if [ ! -d "$HOME/Developer" ]; then
  mkdir "$HOME/Developer"
  echo "Developer path at $HOME/Developer - created ðŸ”¥"
else
  echo "Developer path at $HOME/Developer - already exists ðŸ‘Œ"
fi

# Clone wsb repos
echo -e "\n"
echo "Cloning wsb repos..."
echo "------------------------------------------------"

wsbRepos=(
  "cup-tournament"
)
for wsbRepo in "${wsbRepos[@]}"; do
  if [ ! -d "$HOME/Developer/wsb/$wsbRepo" ]; then
    git clone -q git@github.com:teziovsky/$wsbRepo.git "$HOME/Developer/wsb/$wsbRepo"
    echo "$wsbRepo repo - cloned ðŸ”¥"
  else
    echo "$wsbRepo repo - already exists ðŸ‘Œ"
  fi
  sleep 1
done

# Clone cli repos
echo -e "\n"
echo "Cloning cli repos..."
echo "------------------------------------------------"

cliRepos=(
  "md-generate"
)
for cliRepo in "${cliRepos[@]}"; do
  if [ ! -d "$HOME/Developer/cli/$cliRepo" ]; then
    git clone -q git@github.com:teziovsky/$cliRepo.git "$HOME/Developer/cli/$cliRepo"
    echo "$cliRepo repo - cloned ðŸ”¥"
  else
    echo "$cliRepo repo - already exists ðŸ‘Œ"
  fi
  sleep 1
done

# Clone contributions repos
echo -e "\n"
echo "Cloning contributions repos..."
echo "------------------------------------------------"

contributionsRepos=(
  "vuelidate-vuelidate"
  "awesome-uses"
  "fig-autocomplete"
  "snippet-explorer"
)
for contributionsRepo in "${contributionsRepos[@]}"; do
  if [ ! -d "$HOME/Developer/contributions/$contributionsRepo" ]; then
    git clone -q git@github.com:teziovsky/$contributionsRepo.git "$HOME/Developer/contributions/$contributionsRepo"
    echo "$contributionsRepo repo - cloned ðŸ”¥"
  else
    echo "$contributionsRepo repo - already exists ðŸ‘Œ"
  fi
  sleep 1
done
