var Wu=Object.create;var Lr=Object.defineProperty;var Lu=Object.getOwnPropertyDescriptor;var $u=Object.getOwnPropertyNames;var zu=Object.getPrototypeOf,Mu=Object.prototype.hasOwnProperty;var Oi=r=>Lr(r,"__esModule",{value:!0});var jt=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),qi=(r,t)=>{for(var o in t)Lr(r,o,{get:t[o],enumerable:!0})},Di=(r,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $u(t))!Mu.call(r,s)&&(o||s!=="default")&&Lr(r,s,{get:()=>t[s],enumerable:!(a=Lu(t,s))||a.enumerable});return r},pe=(r,t)=>Di(Oi(Lr(r!=null?Wu(zu(r)):{},"default",!t&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),ju=(r=>(t,o)=>r&&r.get(t)||(o=Di(Oi({}),t,1),r&&r.set(t,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Fi=(r,t,o)=>{if(!t.has(r))throw TypeError("Cannot "+o)};var W=(r,t,o)=>(Fi(r,t,"read from private field"),o?o.call(r):t.get(r)),J=(r,t,o)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,o)},V=(r,t,o,a)=>(Fi(r,t,"write to private field"),a?a.call(r,o):t.set(r,o),o);var $i=A(($r,Li)=>{(function(r,t){typeof $r=="object"&&typeof Li!="undefined"?t($r):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis!="undefined"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})($r,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,m=Promise.prototype.then,b=Promise.resolve.bind(p),w=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return b(e)}function g(e){return w(e)}function y(e,n,i){return m.call(e,n,i)}function C(e,n,i){y(y(e,n,i),void 0,f)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function D(e,n,i){return y(e,n,i)}function H(e){y(e,void 0,f)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return i=>y(n,i)})();function M(e,n,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,i)}function x(e,n,i){try{return S(M(e,n,i))}catch(l){return g(l)}}let le=16384;class K{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let i=this._back,l=i;i._elements.length===le-1&&(l={_elements:[],_next:void 0}),i._elements.push(n),l!==i&&(this._back=l,i._next=l),++this._size}shift(){let n=this._front,i=n,l=this._cursor,c=l+1,d=n._elements,h=d[l];return c===le&&(i=n._next,c=0),--this._size,this._cursor=c,n!==i&&(this._front=i),d[l]=void 0,h}forEach(n){let i=this._cursor,l=this._front,c=l._elements;for(;(i!==c.length||l._next!==void 0)&&!(i===c.length&&(l=l._next,c=l._elements,i=0,c.length===0));)n(c[i]),++i}peek(){let n=this._front,i=this._cursor;return n._elements[i]}}function go(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?dn(e):n._state==="closed"?dl(e):So(e,n._storedError)}function fn(e,n){let i=e._ownerReadableStream;return fe(i,n)}function Se(e){e._ownerReadableStream._state==="readable"?hn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):hl(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function et(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function dn(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i})}function So(e,n){dn(e),hn(e,n)}function dl(e){dn(e),_o(e)}function hn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function hl(e,n){So(e,n)}function _o(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let wo=t("[[AbortSteps]]"),Ro=t("[[ErrorSteps]]"),mn=t("[[CancelSteps]]"),pn=t("[[PullSteps]]"),To=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},ml=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function pl(e){return typeof e=="object"||typeof e=="function"}function _e(e,n){if(e!==void 0&&!pl(e))throw new TypeError(`${n} is not an object.`)}function ue(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function bl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Eo(e,n){if(!bl(e))throw new TypeError(`${n} is not an object.`)}function we(e,n,i){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${i}'.`)}function bn(e,n,i){if(e===void 0)throw new TypeError(`${n} is required in '${i}'.`)}function yn(e){return Number(e)}function Co(e){return e===0?0:e}function yl(e){return Co(ml(e))}function Po(e,n){let i=0,l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Co(c),!To(c))throw new TypeError(`${n} is not a finite number`);if(c=yl(c),c<i||c>l)throw new TypeError(`${n} is outside the accepted range of ${i} to ${l}, inclusive`);return!To(c)||c===0?0:c}function gn(e,n){if(!xe(e))throw new TypeError(`${n} is not a ReadableStream.`)}function tt(e){return new At(e)}function Ao(e,n){e._reader._readRequests.push(n)}function Sn(e,n,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(n)}function ar(e){return e._reader._readRequests.length}function vo(e){let n=e._reader;return!(n===void 0||!ve(n))}class At{constructor(n){if(we(n,1,"ReadableStreamDefaultReader"),gn(n,"First parameter"),Oe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");go(this,n),this._readRequests=new K}get closed(){return ve(this)?this._closedPromise:g(sr("closed"))}cancel(n=void 0){return ve(this)?this._ownerReadableStream===void 0?g(et("cancel")):fn(this,n):g(sr("cancel"))}read(){if(!ve(this))return g(sr("read"));if(this._ownerReadableStream===void 0)return g(et("read from"));let n,i,l=T((d,h)=>{n=d,i=h});return vt(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>i(d)}),l}releaseLock(){if(!ve(this))throw sr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Se(this)}}}Object.defineProperties(At.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(At.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ve(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof At}function vt(e,n){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?n._closeSteps():i._state==="errored"?n._errorSteps(i._storedError):i._readableStreamController[pn](n)}function sr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ko=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Io{constructor(n,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=i}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?D(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let i=()=>this._returnSteps(n);return this._ongoingPromise?D(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(et("iterate"));let i,l,c=T((h,_)=>{i=h,l=_});return vt(n,{_chunkSteps:h=>{this._ongoingPromise=void 0,I(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Se(n),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,Se(n),l(h)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(et("finish iterating"));if(!this._preventCancel){let l=fn(i,n);return Se(i),D(l,()=>({value:n,done:!0}))}return Se(i),S({value:n,done:!0})}}let Bo={next(){return xo(this)?this._asyncIteratorImpl.next():g(Oo("next"))},return(e){return xo(this)?this._asyncIteratorImpl.return(e):g(Oo("return"))}};ko!==void 0&&Object.setPrototypeOf(Bo,ko);function gl(e,n){let i=tt(e),l=new Io(i,n),c=Object.create(Bo);return c._asyncIteratorImpl=l,c}function xo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Io}catch{return!1}}function Oo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let qo=Number.isNaN||function(e){return e!==e};function kt(e){return e.slice()}function Do(e,n,i,l,c){new Uint8Array(e).set(new Uint8Array(i,l,c),n)}function pd(e){return e}function lr(e){return!1}function Fo(e,n,i){if(e.slice)return e.slice(n,i);let l=i-n,c=new ArrayBuffer(l);return Do(c,0,e,n,l),c}function Sl(e){return!(typeof e!="number"||qo(e)||e<0)}function Wo(e){let n=Fo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function _n(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function wn(e,n,i){if(!Sl(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:i}),e._queueTotalSize+=i}function _l(e){return e._queue.peek().value}function ke(e){e._queue=new K,e._queueTotalSize=0}class It{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Rn(this))throw Pn("view");return this._view}respond(n){if(!Rn(this))throw Pn("respond");if(we(n,1,"respond"),n=Po(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");lr(this._view.buffer),hr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Rn(this))throw Pn("respondWithNewView");if(we(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");lr(n.buffer),mr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(It.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(It.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class rt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ze(this))throw xt("byobRequest");return Cn(this)}get desiredSize(){if(!ze(this))throw xt("desiredSize");return Ho(this)}close(){if(!ze(this))throw xt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Bt(this)}enqueue(n){if(!ze(this))throw xt("enqueue");if(we(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);dr(this,n)}error(n=void 0){if(!ze(this))throw xt("error");ce(this,n)}[mn](n){Lo(this),ke(this);let i=this._cancelAlgorithm(n);return fr(this),i}[pn](n){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,jo(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(h){n._errorSteps(h);return}let d={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Ao(i,n),Me(this)}}Object.defineProperties(rt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ze(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof rt}function Rn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof It}function Me(e){if(!El(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Me(e))},l=>{ce(e,l)})}function Lo(e){En(e),e._pendingPullIntos=new K}function Tn(e,n){let i=!1;e._state==="closed"&&(i=!0);let l=$o(n);n.readerType==="default"?Sn(e,l,i):Al(e,l,i)}function $o(e){let n=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/i)}function ur(e,n,i,l){e._queue.push({buffer:n,byteOffset:i,byteLength:l}),e._queueTotalSize+=l}function zo(e,n){let i=n.elementSize,l=n.bytesFilled-n.bytesFilled%i,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+c,h=d-d%i,_=c,E=!1;h>l&&(_=h-n.bytesFilled,E=!0);let B=e._queue;for(;_>0;){let O=B.peek(),q=Math.min(_,O.byteLength),j=n.byteOffset+n.bytesFilled;Do(n.buffer,j,O.buffer,O.byteOffset,q),O.byteLength===q?B.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,Mo(e,q,n),_-=q}return E}function Mo(e,n,i){i.bytesFilled+=n}function jo(e){e._queueTotalSize===0&&e._closeRequested?(fr(e),zt(e._controlledReadableByteStream)):Me(e)}function En(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Uo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();zo(e,n)&&(cr(e),Tn(e._controlledReadableByteStream,n))}}function wl(e,n,i){let l=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,h=n.buffer,_={buffer:h,bufferByteLength:h.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Yo(l,i);return}if(l._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);i._closeSteps(E);return}if(e._queueTotalSize>0){if(zo(e,_)){let E=$o(_);jo(e),i._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ce(e,E),i._errorSteps(E);return}}e._pendingPullIntos.push(_),Yo(l,i),Me(e)}function Rl(e,n){let i=e._controlledReadableByteStream;if(An(i))for(;Qo(i)>0;){let l=cr(e);Tn(i,l)}}function Tl(e,n,i){if(Mo(e,n,i),i.bytesFilled<i.elementSize)return;cr(e);let l=i.bytesFilled%i.elementSize;if(l>0){let c=i.byteOffset+i.bytesFilled,d=Fo(i.buffer,c-l,c);ur(e,d,0,d.byteLength)}i.bytesFilled-=l,Tn(e._controlledReadableByteStream,i),Uo(e)}function No(e,n){let i=e._pendingPullIntos.peek();En(e),e._controlledReadableByteStream._state==="closed"?Rl(e):Tl(e,n,i),Me(e)}function cr(e){return e._pendingPullIntos.shift()}function El(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(vo(n)&&ar(n)>0||An(n)&&Qo(n)>0||Ho(e)>0)}function fr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Bt(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ce(e,l),l}fr(e),zt(n)}}function dr(e,n){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let l=n.buffer,c=n.byteOffset,d=n.byteLength,h=l;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();lr(_.buffer),_.buffer=_.buffer}if(En(e),vo(i))if(ar(i)===0)ur(e,h,c,d);else{e._pendingPullIntos.length>0&&cr(e);let _=new Uint8Array(h,c,d);Sn(i,_,!1)}else An(i)?(ur(e,h,c,d),Uo(e)):ur(e,h,c,d);Me(e)}function ce(e,n){let i=e._controlledReadableByteStream;i._state==="readable"&&(Lo(e),ke(e),fr(e),Si(i,n))}function Cn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),i=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(It.prototype);Pl(l,e,i),e._byobRequest=l}return e._byobRequest}function Ho(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function hr(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+n>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,No(e,n)}function mr(e,n){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+n.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;i.buffer=n.buffer,No(e,c)}function Go(e,n,i,l,c,d,h){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,ke(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,n._autoAllocateChunkSize=h,n._pendingPullIntos=new K,e._readableStreamController=n;let _=i();C(S(_),()=>{n._started=!0,Me(n)},E=>{ce(n,E)})}function Cl(e,n,i){let l=Object.create(rt.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);n.start!==void 0&&(c=()=>n.start(l)),n.pull!==void 0&&(d=()=>n.pull(l)),n.cancel!==void 0&&(h=E=>n.cancel(E));let _=n.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Go(e,l,c,d,h,i,_)}function Pl(e,n,i){e._associatedReadableByteStreamController=n,e._view=i}function Pn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function xt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Vo(e){return new Ot(e)}function Yo(e,n){e._reader._readIntoRequests.push(n)}function Al(e,n,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(n):c._chunkSteps(n)}function Qo(e){return e._reader._readIntoRequests.length}function An(e){let n=e._reader;return!(n===void 0||!je(n))}class Ot{constructor(n){if(we(n,1,"ReadableStreamBYOBReader"),gn(n,"First parameter"),Oe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ze(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");go(this,n),this._readIntoRequests=new K}get closed(){return je(this)?this._closedPromise:g(pr("closed"))}cancel(n=void 0){return je(this)?this._ownerReadableStream===void 0?g(et("cancel")):fn(this,n):g(pr("cancel"))}read(n){if(!je(this))return g(pr("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(lr(n.buffer),this._ownerReadableStream===void 0)return g(et("read from"));let i,l,c=T((h,_)=>{i=h,l=_});return Xo(this,n,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>l(h)}),c}releaseLock(){if(!je(this))throw pr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Se(this)}}}Object.defineProperties(Ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ot}function Xo(e,n,i){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?i._errorSteps(l._storedError):wl(l._readableStreamController,n,i)}function pr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function qt(e,n){let{highWaterMark:i}=e;if(i===void 0)return n;if(qo(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function br(e){let{size:n}=e;return n||(()=>1)}function yr(e,n){_e(e,n);let i=e==null?void 0:e.highWaterMark,l=e==null?void 0:e.size;return{highWaterMark:i===void 0?void 0:yn(i),size:l===void 0?void 0:vl(l,`${n} has member 'size' that`)}}function vl(e,n){return ue(e,n),i=>yn(e(i))}function kl(e,n){_e(e,n);let i=e==null?void 0:e.abort,l=e==null?void 0:e.close,c=e==null?void 0:e.start,d=e==null?void 0:e.type,h=e==null?void 0:e.write;return{abort:i===void 0?void 0:Il(i,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Bl(l,e,`${n} has member 'close' that`),start:c===void 0?void 0:xl(c,e,`${n} has member 'start' that`),write:h===void 0?void 0:Ol(h,e,`${n} has member 'write' that`),type:d}}function Il(e,n,i){return ue(e,i),l=>x(e,n,[l])}function Bl(e,n,i){return ue(e,i),()=>x(e,n,[])}function xl(e,n,i){return ue(e,i),l=>M(e,n,[l])}function Ol(e,n,i){return ue(e,i),(l,c)=>x(e,n,[l,c])}function Ko(e,n){if(!nt(e))throw new TypeError(`${n} is not a WritableStream.`)}function ql(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Dl=typeof AbortController=="function";function Fl(){if(Dl)return new AbortController}class Dt{constructor(n={},i={}){n===void 0?n=null:Eo(n,"First parameter");let l=yr(i,"Second parameter"),c=kl(n,"First parameter");if(Jo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=br(l),_=qt(l,1);Xl(this,c,_,h)}get locked(){if(!nt(this))throw Rr("locked");return ot(this)}abort(n=void 0){return nt(this)?ot(this)?g(new TypeError("Cannot abort a stream that already has a writer")):gr(this,n):g(Rr("abort"))}close(){return nt(this)?ot(this)?g(new TypeError("Cannot close a stream that already has a writer")):me(this)?g(new TypeError("Cannot close an already-closing stream")):ei(this):g(Rr("close"))}getWriter(){if(!nt(this))throw Rr("getWriter");return Zo(this)}}Object.defineProperties(Dt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Zo(e){return new Ft(e)}function Wl(e,n,i,l,c=1,d=()=>1){let h=Object.create(Dt.prototype);Jo(h);let _=Object.create(it.prototype);return ai(h,_,e,n,i,l,c,d),h}function Jo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new K,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function nt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Dt}function ot(e){return e._writer!==void 0}function gr(e,n){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,n=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||kn(e,n),d}function ei(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Ln(l),Kl(e._writableStreamController),i}function Ll(e){return T((i,l)=>{let c={_resolve:i,_reject:l};e._writeRequests.push(c)})}function vn(e,n){if(e._state==="writable"){kn(e,n);return}In(e)}function kn(e,n){let i=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&ri(l,n),!Ul(e)&&i._started&&In(e)}function In(e){e._state="errored",e._writableStreamController[Ro]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new K,e._pendingAbortRequest===void 0){Sr(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(n),Sr(e);return}let l=e._writableStreamController[wo](i._reason);C(l,()=>{i._resolve(),Sr(e)},c=>{i._reject(c),Sr(e)})}function $l(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function zl(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,vn(e,n)}function Ml(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&ci(i)}function jl(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),vn(e,n)}function me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ul(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Nl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Hl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Sr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Fn(n,e._storedError)}function Bn(e,n){let i=e._writer;i!==void 0&&n!==e._backpressure&&(n?ou(i):Ln(i)),e._backpressure=n}class Ft{constructor(n){if(we(n,1,"WritableStreamDefaultWriter"),Ko(n,"First parameter"),ot(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let i=n._state;if(i==="writable")!me(n)&&n._backpressure?Er(this):fi(this),Tr(this);else if(i==="erroring")Wn(this,n._storedError),Tr(this);else if(i==="closed")fi(this),ru(this);else{let l=n._storedError;Wn(this,l),ui(this,l)}}get closed(){return Ue(this)?this._closedPromise:g(Ne("closed"))}get desiredSize(){if(!Ue(this))throw Ne("desiredSize");if(this._ownerWritableStream===void 0)throw Wt("desiredSize");return Ql(this)}get ready(){return Ue(this)?this._readyPromise:g(Ne("ready"))}abort(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?g(Wt("abort")):Gl(this,n):g(Ne("abort"))}close(){if(!Ue(this))return g(Ne("close"));let n=this._ownerWritableStream;return n===void 0?g(Wt("close")):me(n)?g(new TypeError("Cannot close an already-closing stream")):ti(this)}releaseLock(){if(!Ue(this))throw Ne("releaseLock");this._ownerWritableStream!==void 0&&ni(this)}write(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?g(Wt("write to")):oi(this,n):g(Ne("write"))}}Object.defineProperties(Ft.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ue(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Ft}function Gl(e,n){let i=e._ownerWritableStream;return gr(i,n)}function ti(e){let n=e._ownerWritableStream;return ei(n)}function Vl(e){let n=e._ownerWritableStream,i=n._state;return me(n)||i==="closed"?S(void 0):i==="errored"?g(n._storedError):ti(e)}function Yl(e,n){e._closedPromiseState==="pending"?Fn(e,n):nu(e,n)}function ri(e,n){e._readyPromiseState==="pending"?di(e,n):iu(e,n)}function Ql(e){let n=e._ownerWritableStream,i=n._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:si(n._writableStreamController)}function ni(e){let n=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ri(e,i),Yl(e,i),n._writer=void 0,e._ownerWritableStream=void 0}function oi(e,n){let i=e._ownerWritableStream,l=i._writableStreamController,c=Zl(l,n);if(i!==e._ownerWritableStream)return g(Wt("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(me(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=Ll(i);return Jl(l,n,c),h}let ii={};class it{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!xn(this))throw Dn("abortReason");return this._abortReason}get signal(){if(!xn(this))throw Dn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!xn(this))throw Dn("error");this._controlledWritableStream._state==="writable"&&li(this,n)}[wo](n){let i=this._abortAlgorithm(n);return _r(this),i}[Ro](){ke(this)}}Object.defineProperties(it.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function xn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof it}function ai(e,n,i,l,c,d,h,_){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,ke(n),n._abortReason=void 0,n._abortController=Fl(),n._started=!1,n._strategySizeAlgorithm=_,n._strategyHWM=h,n._writeAlgorithm=l,n._closeAlgorithm=c,n._abortAlgorithm=d;let E=qn(n);Bn(e,E);let B=i(),O=S(B);C(O,()=>{n._started=!0,wr(n)},q=>{n._started=!0,vn(e,q)})}function Xl(e,n,i,l){let c=Object.create(it.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.write!==void 0&&(h=B=>n.write(B,c)),n.close!==void 0&&(_=()=>n.close()),n.abort!==void 0&&(E=B=>n.abort(B)),ai(e,c,d,h,_,E,i,l)}function _r(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Kl(e){wn(e,ii,0),wr(e)}function Zl(e,n){try{return e._strategySizeAlgorithm(n)}catch(i){return On(e,i),1}}function si(e){return e._strategyHWM-e._queueTotalSize}function Jl(e,n,i){try{wn(e,n,i)}catch(c){On(e,c);return}let l=e._controlledWritableStream;if(!me(l)&&l._state==="writable"){let c=qn(e);Bn(l,c)}wr(e)}function wr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){In(n);return}if(e._queue.length===0)return;let l=_l(e);l===ii?eu(e):tu(e,l)}function On(e,n){e._controlledWritableStream._state==="writable"&&li(e,n)}function eu(e){let n=e._controlledWritableStream;Nl(n),_n(e);let i=e._closeAlgorithm();_r(e),C(i,()=>{Ml(n)},l=>{jl(n,l)})}function tu(e,n){let i=e._controlledWritableStream;Hl(i);let l=e._writeAlgorithm(n);C(l,()=>{$l(i);let c=i._state;if(_n(e),!me(i)&&c==="writable"){let d=qn(e);Bn(i,d)}wr(e)},c=>{i._state==="writable"&&_r(e),zl(i,c)})}function qn(e){return si(e)<=0}function li(e,n){let i=e._controlledWritableStream;_r(e),kn(i,n)}function Rr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Dn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Ne(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Wt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Tr(e){e._closedPromise=T((n,i)=>{e._closedPromise_resolve=n,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function ui(e,n){Tr(e),Fn(e,n)}function ru(e){Tr(e),ci(e)}function Fn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function nu(e,n){ui(e,n)}function ci(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Er(e){e._readyPromise=T((n,i)=>{e._readyPromise_resolve=n,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function Wn(e,n){Er(e),di(e,n)}function fi(e){Er(e),Ln(e)}function di(e,n){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ou(e){Er(e)}function iu(e,n){Wn(e,n)}function Ln(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let hi=typeof DOMException!="undefined"?DOMException:void 0;function au(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function su(){let e=function(i,l){this.message=i||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let lu=au(hi)?hi:su();function mi(e,n,i,l,c,d){let h=tt(e),_=Zo(n);e._disturbed=!0;let E=!1,B=S(void 0);return T((O,q)=>{let j;if(d!==void 0){if(j=()=>{let R=new lu("Aborted","AbortError"),k=[];l||k.push(()=>n._state==="writable"?gr(n,R):S(void 0)),c||k.push(()=>e._state==="readable"?fe(e,R):S(void 0)),Q(()=>Promise.all(k.map(L=>L())),!0,R)},d.aborted){j();return}d.addEventListener("abort",j)}function de(){return T((R,k)=>{function L(Z){Z?R():y(lt(),L,k)}L(!1)})}function lt(){return E?S(!0):y(_._readyPromise,()=>T((R,k)=>{vt(h,{_chunkSteps:L=>{B=y(oi(_,L),void 0,o),R(!1)},_closeSteps:()=>R(!0),_errorSteps:k})}))}if(Re(e,h._closedPromise,R=>{l?oe(!0,R):Q(()=>gr(n,R),!0,R)}),Re(n,_._closedPromise,R=>{c?oe(!0,R):Q(()=>fe(e,R),!0,R)}),G(e,h._closedPromise,()=>{i?oe():Q(()=>Vl(_))}),me(n)||n._state==="closed"){let R=new TypeError("the destination writable stream closed before all data could be piped to it");c?oe(!0,R):Q(()=>fe(e,R),!0,R)}H(de());function qe(){let R=B;return y(B,()=>R!==B?qe():void 0)}function Re(R,k,L){R._state==="errored"?L(R._storedError):v(k,L)}function G(R,k,L){R._state==="closed"?L():P(k,L)}function Q(R,k,L){if(E)return;E=!0,n._state==="writable"&&!me(n)?P(qe(),Z):Z();function Z(){C(R(),()=>Te(k,L),ut=>Te(!0,ut))}}function oe(R,k){E||(E=!0,n._state==="writable"&&!me(n)?P(qe(),()=>Te(R,k)):Te(R,k))}function Te(R,k){ni(_),Se(h),d!==void 0&&d.removeEventListener("abort",j),R?q(k):O(void 0)}})}class at{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Cr(this))throw vr("desiredSize");return $n(this)}close(){if(!Cr(this))throw vr("close");if(!st(this))throw new TypeError("The stream is not in a state that permits close");$t(this)}enqueue(n=void 0){if(!Cr(this))throw vr("enqueue");if(!st(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ar(this,n)}error(n=void 0){if(!Cr(this))throw vr("error");Ie(this,n)}[mn](n){ke(this);let i=this._cancelAlgorithm(n);return Pr(this),i}[pn](n){let i=this._controlledReadableStream;if(this._queue.length>0){let l=_n(this);this._closeRequested&&this._queue.length===0?(Pr(this),zt(i)):Lt(this),n._chunkSteps(l)}else Ao(i,n),Lt(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(at.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Cr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof at}function Lt(e){if(!pi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Lt(e))},l=>{Ie(e,l)})}function pi(e){let n=e._controlledReadableStream;return!st(e)||!e._started?!1:!!(Oe(n)&&ar(n)>0||$n(e)>0)}function Pr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function $t(e){if(!st(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Pr(e),zt(n))}function Ar(e,n){if(!st(e))return;let i=e._controlledReadableStream;if(Oe(i)&&ar(i)>0)Sn(i,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(c){throw Ie(e,c),c}try{wn(e,n,l)}catch(c){throw Ie(e,c),c}}Lt(e)}function Ie(e,n){let i=e._controlledReadableStream;i._state==="readable"&&(ke(e),Pr(e),Si(i,n))}function $n(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function uu(e){return!pi(e)}function st(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function bi(e,n,i,l,c,d,h){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,ke(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=h,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=c,e._readableStreamController=n;let _=i();C(S(_),()=>{n._started=!0,Lt(n)},E=>{Ie(n,E)})}function cu(e,n,i,l){let c=Object.create(at.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(c)),n.pull!==void 0&&(h=()=>n.pull(c)),n.cancel!==void 0&&(_=E=>n.cancel(E)),bi(e,c,d,h,_,i,l)}function vr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function fu(e,n){return ze(e._readableStreamController)?hu(e):du(e)}function du(e,n){let i=tt(e),l=!1,c=!1,d=!1,h=!1,_,E,B,O,q,j=T(G=>{q=G});function de(){return l?(c=!0,S(void 0)):(l=!0,vt(i,{_chunkSteps:Q=>{I(()=>{c=!1;let oe=Q,Te=Q;d||Ar(B._readableStreamController,oe),h||Ar(O._readableStreamController,Te),l=!1,c&&de()})},_closeSteps:()=>{l=!1,d||$t(B._readableStreamController),h||$t(O._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function lt(G){if(d=!0,_=G,h){let Q=kt([_,E]),oe=fe(e,Q);q(oe)}return j}function qe(G){if(h=!0,E=G,d){let Q=kt([_,E]),oe=fe(e,Q);q(oe)}return j}function Re(){}return B=zn(Re,de,lt),O=zn(Re,de,qe),v(i._closedPromise,G=>{Ie(B._readableStreamController,G),Ie(O._readableStreamController,G),(!d||!h)&&q(void 0)}),[B,O]}function hu(e){let n=tt(e),i=!1,l=!1,c=!1,d=!1,h=!1,_,E,B,O,q,j=T(R=>{q=R});function de(R){v(R._closedPromise,k=>{R===n&&(ce(B._readableStreamController,k),ce(O._readableStreamController,k),(!d||!h)&&q(void 0))})}function lt(){je(n)&&(Se(n),n=tt(e),de(n)),vt(n,{_chunkSteps:k=>{I(()=>{l=!1,c=!1;let L=k,Z=k;if(!d&&!h)try{Z=Wo(k)}catch(ut){ce(B._readableStreamController,ut),ce(O._readableStreamController,ut),q(fe(e,ut));return}d||dr(B._readableStreamController,L),h||dr(O._readableStreamController,Z),i=!1,l?Re():c&&G()})},_closeSteps:()=>{i=!1,d||Bt(B._readableStreamController),h||Bt(O._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&hr(B._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&hr(O._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{i=!1}})}function qe(R,k){ve(n)&&(Se(n),n=Vo(e),de(n));let L=k?O:B,Z=k?B:O;Xo(n,R,{_chunkSteps:ct=>{I(()=>{l=!1,c=!1;let ft=k?h:d;if(k?d:h)ft||mr(L._readableStreamController,ct);else{let xi;try{xi=Wo(ct)}catch(jn){ce(L._readableStreamController,jn),ce(Z._readableStreamController,jn),q(fe(e,jn));return}ft||mr(L._readableStreamController,ct),dr(Z._readableStreamController,xi)}i=!1,l?Re():c&&G()})},_closeSteps:ct=>{i=!1;let ft=k?h:d,Wr=k?d:h;ft||Bt(L._readableStreamController),Wr||Bt(Z._readableStreamController),ct!==void 0&&(ft||mr(L._readableStreamController,ct),!Wr&&Z._readableStreamController._pendingPullIntos.length>0&&hr(Z._readableStreamController,0)),(!ft||!Wr)&&q(void 0)},_errorSteps:()=>{i=!1}})}function Re(){if(i)return l=!0,S(void 0);i=!0;let R=Cn(B._readableStreamController);return R===null?lt():qe(R._view,!1),S(void 0)}function G(){if(i)return c=!0,S(void 0);i=!0;let R=Cn(O._readableStreamController);return R===null?lt():qe(R._view,!0),S(void 0)}function Q(R){if(d=!0,_=R,h){let k=kt([_,E]),L=fe(e,k);q(L)}return j}function oe(R){if(h=!0,E=R,d){let k=kt([_,E]),L=fe(e,k);q(L)}return j}function Te(){}return B=gi(Te,Re,Q),O=gi(Te,G,oe),de(n),[B,O]}function mu(e,n){_e(e,n);let i=e,l=i==null?void 0:i.autoAllocateChunkSize,c=i==null?void 0:i.cancel,d=i==null?void 0:i.pull,h=i==null?void 0:i.start,_=i==null?void 0:i.type;return{autoAllocateChunkSize:l===void 0?void 0:Po(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:pu(c,i,`${n} has member 'cancel' that`),pull:d===void 0?void 0:bu(d,i,`${n} has member 'pull' that`),start:h===void 0?void 0:yu(h,i,`${n} has member 'start' that`),type:_===void 0?void 0:gu(_,`${n} has member 'type' that`)}}function pu(e,n,i){return ue(e,i),l=>x(e,n,[l])}function bu(e,n,i){return ue(e,i),l=>x(e,n,[l])}function yu(e,n,i){return ue(e,i),l=>M(e,n,[l])}function gu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Su(e,n){_e(e,n);let i=e==null?void 0:e.mode;return{mode:i===void 0?void 0:_u(i,`${n} has member 'mode' that`)}}function _u(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function wu(e,n){_e(e,n);let i=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(i)}}function yi(e,n){_e(e,n);let i=e==null?void 0:e.preventAbort,l=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,d=e==null?void 0:e.signal;return d!==void 0&&Ru(d,`${n} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(l),preventClose:Boolean(c),signal:d}}function Ru(e,n){if(!ql(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Tu(e,n){_e(e,n);let i=e==null?void 0:e.readable;bn(i,"readable","ReadableWritablePair"),gn(i,`${n} has member 'readable' that`);let l=e==null?void 0:e.writable;return bn(l,"writable","ReadableWritablePair"),Ko(l,`${n} has member 'writable' that`),{readable:i,writable:l}}class Be{constructor(n={},i={}){n===void 0?n=null:Eo(n,"First parameter");let l=yr(i,"Second parameter"),c=mu(n,"First parameter");if(Mn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=qt(l,0);Cl(this,c,d)}else{let d=br(l),h=qt(l,1);cu(this,c,h,d)}}get locked(){if(!xe(this))throw He("locked");return Oe(this)}cancel(n=void 0){return xe(this)?Oe(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):fe(this,n):g(He("cancel"))}getReader(n=void 0){if(!xe(this))throw He("getReader");return Su(n,"First parameter").mode===void 0?tt(this):Vo(this)}pipeThrough(n,i={}){if(!xe(this))throw He("pipeThrough");we(n,1,"pipeThrough");let l=Tu(n,"First parameter"),c=yi(i,"Second parameter");if(Oe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ot(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=mi(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return H(d),l.readable}pipeTo(n,i={}){if(!xe(this))return g(He("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!nt(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=yi(i,"Second parameter")}catch(c){return g(c)}return Oe(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ot(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):mi(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!xe(this))throw He("tee");let n=fu(this);return kt(n)}values(n=void 0){if(!xe(this))throw He("values");let i=wu(n,"First parameter");return gl(this,i.preventCancel)}}Object.defineProperties(Be.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Be.prototype,t.asyncIterator,{value:Be.prototype.values,writable:!0,configurable:!0});function zn(e,n,i,l=1,c=()=>1){let d=Object.create(Be.prototype);Mn(d);let h=Object.create(at.prototype);return bi(d,h,e,n,i,l,c),d}function gi(e,n,i){let l=Object.create(Be.prototype);Mn(l);let c=Object.create(rt.prototype);return Go(l,c,e,n,i,0,void 0),l}function Mn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function xe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Be}function Oe(e){return e._reader!==void 0}function fe(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);zt(e);let i=e._reader;i!==void 0&&je(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new K);let l=e._readableStreamController[mn](n);return D(l,o)}function zt(e){e._state="closed";let n=e._reader;n!==void 0&&(_o(n),ve(n)&&(n._readRequests.forEach(i=>{i._closeSteps()}),n._readRequests=new K))}function Si(e,n){e._state="errored",e._storedError=n;let i=e._reader;i!==void 0&&(hn(i,n),ve(i)?(i._readRequests.forEach(l=>{l._errorSteps(n)}),i._readRequests=new K):(i._readIntoRequests.forEach(l=>{l._errorSteps(n)}),i._readIntoRequests=new K))}function He(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function _i(e,n){_e(e,n);let i=e==null?void 0:e.highWaterMark;return bn(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:yn(i)}}let wi=e=>e.byteLength;Object.defineProperty(wi,"name",{value:"size",configurable:!0});class kr{constructor(n){we(n,1,"ByteLengthQueuingStrategy"),n=_i(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ti(this))throw Ri("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ti(this))throw Ri("size");return wi}}Object.defineProperties(kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ri(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ti(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof kr}let Ei=()=>1;Object.defineProperty(Ei,"name",{value:"size",configurable:!0});class Ir{constructor(n){we(n,1,"CountQueuingStrategy"),n=_i(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Pi(this))throw Ci("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Pi(this))throw Ci("size");return Ei}}Object.defineProperties(Ir.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ci(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Pi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Ir}function Eu(e,n){_e(e,n);let i=e==null?void 0:e.flush,l=e==null?void 0:e.readableType,c=e==null?void 0:e.start,d=e==null?void 0:e.transform,h=e==null?void 0:e.writableType;return{flush:i===void 0?void 0:Cu(i,e,`${n} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Pu(c,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Au(d,e,`${n} has member 'transform' that`),writableType:h}}function Cu(e,n,i){return ue(e,i),l=>x(e,n,[l])}function Pu(e,n,i){return ue(e,i),l=>M(e,n,[l])}function Au(e,n,i){return ue(e,i),(l,c)=>x(e,n,[l,c])}class Br{constructor(n={},i={},l={}){n===void 0&&(n=null);let c=yr(i,"Second parameter"),d=yr(l,"Third parameter"),h=Eu(n,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=qt(d,0),E=br(d),B=qt(c,1),O=br(c),q,j=T(de=>{q=de});vu(this,j,B,O,_,E),Iu(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!Ai(this))throw Bi("readable");return this._readable}get writable(){if(!Ai(this))throw Bi("writable");return this._writable}}Object.defineProperties(Br.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Br.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function vu(e,n,i,l,c,d){function h(){return n}function _(j){return Ou(e,j)}function E(j){return qu(e,j)}function B(){return Du(e)}e._writable=Wl(h,_,B,E,i,l);function O(){return Fu(e)}function q(j){return Or(e,j),S(void 0)}e._readable=zn(h,O,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,qr(e,!0),e._transformStreamController=void 0}function Ai(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Br}function xr(e,n){Ie(e._readable._readableStreamController,n),Or(e,n)}function Or(e,n){vi(e._transformStreamController),On(e._writable._writableStreamController,n),e._backpressure&&qr(e,!1)}function qr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=n}class Mt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Dr(this))throw Fr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return $n(n)}enqueue(n=void 0){if(!Dr(this))throw Fr("enqueue");ki(this,n)}error(n=void 0){if(!Dr(this))throw Fr("error");Bu(this,n)}terminate(){if(!Dr(this))throw Fr("terminate");xu(this)}}Object.defineProperties(Mt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Dr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Mt}function ku(e,n,i,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=i,n._flushAlgorithm=l}function Iu(e,n){let i=Object.create(Mt.prototype),l=d=>{try{return ki(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);n.transform!==void 0&&(l=d=>n.transform(d,i)),n.flush!==void 0&&(c=()=>n.flush(i)),ku(e,i,l,c)}function vi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ki(e,n){let i=e._controlledTransformStream,l=i._readable._readableStreamController;if(!st(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ar(l,n)}catch(d){throw Or(i,d),i._readable._storedError}uu(l)!==i._backpressure&&qr(i,!0)}function Bu(e,n){xr(e._controlledTransformStream,n)}function Ii(e,n){let i=e._transformAlgorithm(n);return D(i,void 0,l=>{throw xr(e._controlledTransformStream,l),l})}function xu(e){let n=e._controlledTransformStream,i=n._readable._readableStreamController;$t(i);let l=new TypeError("TransformStream terminated");Or(n,l)}function Ou(e,n){let i=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return D(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Ii(i,n)})}return Ii(i,n)}function qu(e,n){return xr(e,n),S(void 0)}function Du(e){let n=e._readable,i=e._transformStreamController,l=i._flushAlgorithm();return vi(i),D(l,()=>{if(n._state==="errored")throw n._storedError;$t(n._readableStreamController)},c=>{throw xr(e,c),n._storedError})}function Fu(e){return qr(e,!1),e._backpressureChangePromise}function Fr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Bi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=kr,r.CountQueuingStrategy=Ir,r.ReadableByteStreamController=rt,r.ReadableStream=Be,r.ReadableStreamBYOBReader=Ot,r.ReadableStreamBYOBRequest=It,r.ReadableStreamDefaultController=at,r.ReadableStreamDefaultReader=At,r.TransformStream=Br,r.TransformStreamDefaultController=Mt,r.WritableStream=Dt,r.WritableStreamDefaultController=it,r.WritableStreamDefaultWriter=Ft,Object.defineProperty(r,"__esModule",{value:!0})})});var zi=A(()=>{var Nu=65536;if(!globalThis.ReadableStream)try{let r=require("process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,$i())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let p=await s.slice(a,Math.min(s.size,a+Nu)).arrayBuffer();a+=p.byteLength,u.enqueue(new Uint8Array(p)),a===s.size&&u.close()}})})}catch{}});async function*Un(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let u=Math.min(s-a,Mi),f=o.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0,s=o;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+Mi)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var _d,Mi,Ce,Ut,dt,zr,ht,ji,Hu,Ee,Nt=jt(()=>{_d=pe(zi(),1);Mi=65536;ji=(ht=class{constructor(t=[],o={}){J(this,Ce,[]);J(this,Ut,"");J(this,dt,0);J(this,zr,"transparent");if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof ht?f=u:f=a.encode(`${u}`),V(this,dt,W(this,dt)+(ArrayBuffer.isView(f)?f.byteLength:f.size)),W(this,Ce).push(f)}V(this,zr,`${o.endings===void 0?"transparent":o.endings}`);let s=o.type===void 0?"":String(o.type);V(this,Ut,/^[\x20-\x7E]*$/.test(s)?s:"")}get size(){return W(this,dt)}get type(){return W(this,Ut)}async text(){let t=new TextDecoder,o="";for await(let a of Un(W(this,Ce),!1))o+=t.decode(a,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let a of Un(W(this,Ce),!1))t.set(a,o),o+=a.length;return t.buffer}stream(){let t=Un(W(this,Ce),!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await t.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,a=""){let{size:s}=this,u=t<0?Math.max(s+t,0):Math.min(t,s),f=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(f-u,0),m=W(this,Ce),b=[],w=0;for(let S of m){if(w>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,f)),w+=y.byteLength):(y=S.slice(u,Math.min(g,f)),w+=y.size),f-=g,b.push(y),u=0}}let T=new ht([],{type:String(a).toLowerCase()});return V(T,dt,p),V(T,Ce,b),T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}},Ce=new WeakMap,Ut=new WeakMap,dt=new WeakMap,zr=new WeakMap,ht);Object.defineProperties(ji.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Hu=ji,Ee=Hu});var Ht,Gt,Ui,Gu,Vu,mt,Nn=jt(()=>{Nt();Gu=(Ui=class extends Ee{constructor(t,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,a);J(this,Ht,0);J(this,Gt,"");a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||V(this,Ht,s),V(this,Gt,String(o))}get name(){return W(this,Gt)}get lastModified(){return W(this,Ht)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Ee&&/^(File)$/.test(t[Symbol.toStringTag])}},Ht=new WeakMap,Gt=new WeakMap,Ui),Vu=Gu,mt=Vu});function Gi(r,t=Ee){var o=`${Ni()}${Ni()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?a.push(s+Hn(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Hn(f)+`"; filename="${Hn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${o}--`),new t(a,{type:"multipart/form-data; boundary="+o})}var Vt,Yu,Qu,Ni,Xu,Hi,Hn,Ge,ie,Vi,Ve,Mr=jt(()=>{Nt();Nn();({toStringTag:Vt,iterator:Yu,hasInstance:Qu}=Symbol),Ni=Math.random,Xu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Hi=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Vt])?[(o=o!==void 0?o+"":t[Vt]=="File"?t.name:"blob",r),t.name!==o||t[Vt]=="blob"?new mt([t],o,t):t]:[r,t+""]),Hn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ge=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ve=(Vi=class{constructor(...t){J(this,ie,[]);if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Vt](){return"FormData"}[Yu](){return this.entries()}static[Qu](t){return t&&typeof t=="object"&&t[Vt]==="FormData"&&!Xu.some(o=>typeof t[o]!="function")}append(...t){Ge("append",arguments,2),W(this,ie).push(Hi(...t))}delete(t){Ge("delete",arguments,1),t+="",V(this,ie,W(this,ie).filter(([o])=>o!==t))}get(t){Ge("get",arguments,1),t+="";for(var o=W(this,ie),a=o.length,s=0;s<a;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Ge("getAll",arguments,1),o=[],t+="",W(this,ie).forEach(a=>a[0]===t&&o.push(a[1])),o}has(t){return Ge("has",arguments,1),t+="",W(this,ie).some(o=>o[0]===t)}forEach(t,o){Ge("forEach",arguments,1);for(var[a,s]of this)t.call(o,s,a,this)}set(...t){Ge("set",arguments,2);var o=[],a=!0;t=Hi(...t),W(this,ie).forEach(s=>{s[0]===t[0]?a&&(a=!o.push(t)):o.push(s)}),a&&o.push(t),V(this,ie,o)}*entries(){yield*W(this,ie)}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}},ie=new WeakMap,Vi)});var Ki=A((Od,Xi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Xi.exports=globalThis.DOMException});var Qt,Zi,Ku,Ye,Qe,Vn,Zu,Yn=jt(()=>{Qt=require("fs"),Zi=pe(Ki(),1);Nn();Nt();({stat:Ku}=Qt.promises),Vn=class{constructor(t){J(this,Ye,void 0);J(this,Qe,void 0);V(this,Ye,t.path),V(this,Qe,t.start),this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Vn({path:W(this,Ye),lastModified:this.lastModified,size:o-t,start:W(this,Qe)+t})}async*stream(){let{mtimeMs:t}=await Ku(W(this,Ye));if(t>this.lastModified)throw new Zi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Qt.createReadStream)(W(this,Ye),{start:W(this,Qe),end:W(this,Qe)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},Zu=Vn;Ye=new WeakMap,Qe=new WeakMap});var ta={};qi(ta,{toFormData:()=>ic});function oc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function ic(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new ea(o[1]||o[2]),s,u,f,p,m,b,w=[],T=new Ve,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{w.push(v)},y=()=>{let v=new mt(w,b,{type:m});T.append(p,v)},C=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=C,s="",u="",f="",p="",m="",b=null,w.length=0},a.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},a.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},a.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),b=oc(u),b&&(a.onPartData=g,a.onPartEnd=y)}else s==="content-type"&&(m=u);u="",s=""};for await(let v of r)a.write(v);return a.end(),T}var be,$,Ji,Fe,Ur,Nr,Ju,Xt,ec,tc,rc,nc,Xe,ea,ra=jt(()=>{Yn();Mr();be=0,$={START_BOUNDARY:be++,HEADER_FIELD_START:be++,HEADER_FIELD:be++,HEADER_VALUE_START:be++,HEADER_VALUE:be++,HEADER_VALUE_ALMOST_DONE:be++,HEADERS_ALMOST_DONE:be++,PART_DATA_START:be++,PART_DATA:be++,END:be++},Ji=1,Fe={PART_BOUNDARY:Ji,LAST_BOUNDARY:Ji*=2},Ur=10,Nr=13,Ju=32,Xt=45,ec=58,tc=97,rc=122,nc=r=>r|32,Xe=()=>{},ea=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Xe,this.onHeaderField=Xe,this.onHeadersEnd=Xe,this.onHeaderValue=Xe,this.onPartBegin=Xe,this.onPartData=Xe,this.onPartEnd=Xe,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=$.START_BOUNDARY}write(t){let o=0,a=t.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:p,index:m,state:b,flags:w}=this,T=this.boundary.length,S=T-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},D=(I,M,x,le)=>{(M===void 0||M!==x)&&this[I](le&&le.subarray(M,x))},H=(I,M)=>{let x=I+"Mark";x in this&&(M?(D(I,this[x],o,t),delete this[x]):(D(I,this[x],t.length,t),this[x]=0))};for(o=0;o<a;o++)switch(y=t[o],b){case $.START_BOUNDARY:if(m===f.length-2){if(y===Xt)w|=Fe.LAST_BOUNDARY;else if(y!==Nr)return;m++;break}else if(m-1===f.length-2){if(w&Fe.LAST_BOUNDARY&&y===Xt)b=$.END,w=0;else if(!(w&Fe.LAST_BOUNDARY)&&y===Ur)m=0,D("onPartBegin"),b=$.HEADER_FIELD_START;else return;break}y!==f[m+2]&&(m=-2),y===f[m+2]&&m++;break;case $.HEADER_FIELD_START:b=$.HEADER_FIELD,P("onHeaderField"),m=0;case $.HEADER_FIELD:if(y===Nr){v("onHeaderField"),b=$.HEADERS_ALMOST_DONE;break}if(m++,y===Xt)break;if(y===ec){if(m===1)return;H("onHeaderField",!0),b=$.HEADER_VALUE_START;break}if(C=nc(y),C<tc||C>rc)return;break;case $.HEADER_VALUE_START:if(y===Ju)break;P("onHeaderValue"),b=$.HEADER_VALUE;case $.HEADER_VALUE:y===Nr&&(H("onHeaderValue",!0),D("onHeaderEnd"),b=$.HEADER_VALUE_ALMOST_DONE);break;case $.HEADER_VALUE_ALMOST_DONE:if(y!==Ur)return;b=$.HEADER_FIELD_START;break;case $.HEADERS_ALMOST_DONE:if(y!==Ur)return;D("onHeadersEnd"),b=$.PART_DATA_START;break;case $.PART_DATA_START:b=$.PART_DATA,P("onPartData");case $.PART_DATA:if(s=m,m===0){for(o+=S;o<g&&!(t[o]in p);)o+=T;o-=S,y=t[o]}if(m<f.length)f[m]===y?(m===0&&H("onPartData",!0),m++):m=0;else if(m===f.length)m++,y===Nr?w|=Fe.PART_BOUNDARY:y===Xt?w|=Fe.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(w&Fe.PART_BOUNDARY){if(m=0,y===Ur){w&=~Fe.PART_BOUNDARY,D("onPartEnd"),D("onPartBegin"),b=$.HEADER_FIELD_START;break}}else w&Fe.LAST_BOUNDARY&&y===Xt?(D("onPartEnd"),b=$.END,w=0):m=0;if(m>0)u[m-1]=y;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);D("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case $.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}H("onHeaderField"),H("onHeaderValue"),H("onPartData"),this.index=m,this.state=b,this.flags=w}end(){if(this.state===$.HEADER_FIELD_START&&this.index===0||this.state===$.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==$.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Ea=A((Ph,Ta)=>{Ta.exports=Ra;Ra.sync=pc;var _a=require("fs");function mc(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function wa(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:mc(t,o)}function Ra(r,t,o){_a.stat(r,function(a,s){o(a,a?!1:wa(s,r,t))})}function pc(r,t){return wa(_a.statSync(r),r,t)}});var ka=A((Ah,va)=>{va.exports=Pa;Pa.sync=bc;var Ca=require("fs");function Pa(r,t,o){Ca.stat(r,function(a,s){o(a,a?!1:Aa(s,t))})}function bc(r,t){return Aa(Ca.statSync(r),t)}function Aa(r,t){return r.isFile()&&yc(r,t)}function yc(r,t){var o=r.mode,a=r.uid,s=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),f=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),p=parseInt("100",8),m=parseInt("010",8),b=parseInt("001",8),w=p|m,T=o&b||o&m&&s===f||o&p&&a===u||o&w&&u===0;return T}});var Ba=A((kh,Ia)=>{var vh=require("fs"),Kr;process.platform==="win32"||global.TESTING_WINDOWS?Kr=Ea():Kr=ka();Ia.exports=Kn;Kn.sync=gc;function Kn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){Kn(r,t||{},function(u,f){u?s(u):a(f)})})}Kr(r,t||{},function(a,s){a&&(a.code==="EACCES"||t&&t.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function gc(r,t){try{return Kr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var La=A((Ih,Wa)=>{var gt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",xa=require("path"),Sc=gt?";":":",Oa=Ba(),qa=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Da=(r,t)=>{let o=t.colon||Sc,a=r.match(/\//)||gt&&r.match(/\\/)?[""]:[...gt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=gt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=gt?s.split(o):[""];return gt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:a,pathExt:u,pathExtExe:s}},Fa=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:a,pathExt:s,pathExtExe:u}=Da(r,t),f=[],p=b=>new Promise((w,T)=>{if(b===a.length)return t.all&&f.length?w(f):T(qa(r));let S=a[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=xa.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;w(m(C,b,0))}),m=(b,w,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(w+1));let y=s[T];Oa(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(t.all)f.push(b+y);else return S(b+y);return S(m(b,w,T+1))})});return o?p(0).then(b=>o(null,b),o):p(0)},_c=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=Da(r,t),u=[];for(let f=0;f<o.length;f++){let p=o[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,b=xa.join(m,r),w=!m&&/^\.[\\\/]/.test(r)?r.slice(0,2)+b:b;for(let T=0;T<a.length;T++){let S=w+a[T];try{if(Oa.sync(S,{pathExt:s}))if(t.all)u.push(S);else return S}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw qa(r)};Wa.exports=Fa;Fa.sync=_c});var Jn=A((Bh,Zn)=>{"use strict";var $a=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};Zn.exports=$a;Zn.exports.default=$a});var Ua=A((xh,ja)=>{"use strict";var za=require("path"),wc=La(),Rc=Jn();function Ma(r,t){let o=r.options.env||process.env,a=process.cwd(),s=r.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let f;try{f=wc.sync(r.command,{path:o[Rc({env:o})],pathExt:t?za.delimiter:void 0})}catch{}finally{u&&process.chdir(a)}return f&&(f=za.resolve(s?r.options.cwd:"",f)),f}function Tc(r){return Ma(r)||Ma(r,!0)}ja.exports=Tc});var Na=A((Oh,to)=>{"use strict";var eo=/([()\][%!^"`<>&|;, *?])/g;function Ec(r){return r=r.replace(eo,"^$1"),r}function Cc(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(eo,"^$1"),t&&(r=r.replace(eo,"^$1")),r}to.exports.command=Ec;to.exports.argument=Cc});var Ga=A((qh,Ha)=>{"use strict";Ha.exports=/^#!(.*)/});var Ya=A((Dh,Va)=>{"use strict";var Pc=Ga();Va.exports=(r="")=>{let t=r.match(Pc);if(!t)return null;let[o,a]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var Xa=A((Fh,Qa)=>{"use strict";var ro=require("fs"),Ac=Ya();function vc(r){let t=150,o=Buffer.alloc(t),a;try{a=ro.openSync(r,"r"),ro.readSync(a,o,0,t,0),ro.closeSync(a)}catch{}return Ac(o.toString())}Qa.exports=vc});var es=A((Wh,Ja)=>{"use strict";var kc=require("path"),Ka=Ua(),Za=Na(),Ic=Xa(),Bc=process.platform==="win32",xc=/\.(?:com|exe)$/i,Oc=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function qc(r){r.file=Ka(r);let t=r.file&&Ic(r.file);return t?(r.args.unshift(r.file),r.command=t,Ka(r)):r.file}function Dc(r){if(!Bc)return r;let t=qc(r),o=!xc.test(t);if(r.options.forceShell||o){let a=Oc.test(t);r.command=kc.normalize(r.command),r.command=Za.command(r.command),r.args=r.args.map(u=>Za.argument(u,a));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Fc(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let a={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?a:Dc(a)}Ja.exports=Fc});var ns=A((Lh,rs)=>{"use strict";var no=process.platform==="win32";function oo(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Wc(r,t){if(!no)return;let o=r.emit;r.emit=function(a,s){if(a==="exit"){let u=ts(s,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function ts(r,t){return no&&r===1&&!t.file?oo(t.original,"spawn"):null}function Lc(r,t){return no&&r===1&&!t.file?oo(t.original,"spawnSync"):null}rs.exports={hookChildProcess:Wc,verifyENOENT:ts,verifyENOENTSync:Lc,notFoundError:oo}});var as=A(($h,St)=>{"use strict";var os=require("child_process"),io=es(),ao=ns();function is(r,t,o){let a=io(r,t,o),s=os.spawn(a.command,a.args,a.options);return ao.hookChildProcess(s,a),s}function $c(r,t,o){let a=io(r,t,o),s=os.spawnSync(a.command,a.args,a.options);return s.error=s.error||ao.verifyENOENTSync(s.status,a),s}St.exports=is;St.exports.spawn=is;St.exports.sync=$c;St.exports._parse=io;St.exports._enoent=ao});var ls=A((zh,ss)=>{"use strict";ss.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var fs=A((Mh,tr)=>{"use strict";var er=require("path"),us=Jn(),cs=r=>{r={cwd:process.cwd(),path:process.env[us()],execPath:process.execPath,...r};let t,o=er.resolve(r.cwd),a=[];for(;t!==o;)a.push(er.join(o,"node_modules/.bin")),t=o,o=er.resolve(o,"..");let s=er.resolve(r.cwd,r.execPath,"..");return a.push(s),a.concat(r.path).join(er.delimiter)};tr.exports=cs;tr.exports.default=cs;tr.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=us({env:t});return r.path=t[o],t[o]=tr.exports(r),t}});var hs=A((jh,so)=>{"use strict";var ds=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};so.exports=ds;so.exports.default=ds});var ps=A((Uh,Jr)=>{"use strict";var zc=hs(),Zr=new WeakMap,ms=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,a=0,s=r.displayName||r.name||"<anonymous>",u=function(...f){if(Zr.set(u,++a),a===1)o=r.apply(this,f),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return zc(u,r),Zr.set(u,a),u};Jr.exports=ms;Jr.exports.default=ms;Jr.exports.callCount=r=>{if(!Zr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Zr.get(r)}});var bs=A(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.SIGNALS=void 0;var Mc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];en.SIGNALS=Mc});var lo=A(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.SIGRTMAX=_t.getRealtimeSignals=void 0;var jc=function(){let r=gs-ys+1;return Array.from({length:r},Uc)};_t.getRealtimeSignals=jc;var Uc=function(r,t){return{name:`SIGRT${t+1}`,number:ys+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},ys=34,gs=64;_t.SIGRTMAX=gs});var Ss=A(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.getSignals=void 0;var Nc=require("os"),Hc=bs(),Gc=lo(),Vc=function(){let r=(0,Gc.getRealtimeSignals)();return[...Hc.SIGNALS,...r].map(Yc)};tn.getSignals=Vc;var Yc=function({name:r,number:t,description:o,action:a,forced:s=!1,standard:u}){let{signals:{[r]:f}}=Nc.constants,p=f!==void 0;return{name:r,number:p?f:t,description:o,supported:p,action:a,forced:s,standard:u}}});var ws=A(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.signalsByNumber=wt.signalsByName=void 0;var Qc=require("os"),_s=Ss(),Xc=lo(),Kc=function(){return(0,_s.getSignals)().reduce(Zc,{})},Zc=function(r,{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}){return{...r,[t]:{name:t,number:o,description:a,supported:s,action:u,forced:f,standard:p}}},Jc=Kc();wt.signalsByName=Jc;var ef=function(){let r=(0,_s.getSignals)(),t=Xc.SIGRTMAX+1,o=Array.from({length:t},(a,s)=>tf(s,r));return Object.assign({},...o)},tf=function(r,t){let o=rf(r,t);if(o===void 0)return{};let{name:a,description:s,supported:u,action:f,forced:p,standard:m}=o;return{[r]:{name:a,number:r,description:s,supported:u,action:f,forced:p,standard:m}}},rf=function(r,t){let o=t.find(({name:a})=>Qc.constants.signals[a]===r);return o!==void 0?o:t.find(a=>a.number===r)},nf=ef();wt.signalsByNumber=nf});var Ts=A((Yh,Rs)=>{"use strict";var{signalsByName:of}=ws(),af=({timedOut:r,timeout:t,errorCode:o,signal:a,signalDescription:s,exitCode:u,isCanceled:f})=>r?`timed out after ${t} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",sf=({stdout:r,stderr:t,all:o,error:a,signal:s,exitCode:u,command:f,escapedCommand:p,timedOut:m,isCanceled:b,killed:w,parsed:{options:{timeout:T}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:of[s].description,g=a&&a.code,C=`Command ${af({timedOut:m,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:b})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",v=P?`${C}
${a.message}`:C,D=[v,t,r].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=D):a=new Error(D),a.shortMessage=v,a.command=f,a.escapedCommand=p,a.exitCode=u,a.signal=s,a.signalDescription=S,a.stdout=r,a.stderr=t,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=Boolean(m),a.isCanceled=b,a.killed=w&&!m,a};Rs.exports=sf});var Cs=A((Qh,uo)=>{"use strict";var rn=["stdin","stdout","stderr"],lf=r=>rn.some(t=>r[t]!==void 0),Es=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return rn.map(a=>r[a]);if(lf(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${rn.map(a=>`\`${a}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,rn.length);return Array.from({length:o},(a,s)=>t[s])};uo.exports=Es;uo.exports.node=r=>{let t=Es(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Ps=A((Xh,nn)=>{nn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&nn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&nn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Bs=A((Kh,Et)=>{var z=global.process,Ze=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ze(z)?(As=require("assert"),Rt=Ps(),vs=/^win/i.test(z.platform),rr=require("events"),typeof rr!="function"&&(rr=rr.EventEmitter),z.__signal_exit_emitter__?N=z.__signal_exit_emitter__:(N=z.__signal_exit_emitter__=new rr,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),Et.exports=function(r,t){if(!!Ze(global.process)){As.equal(typeof r,"function","a callback must be provided for exit handler"),Tt===!1&&co();var o="exit";t&&t.alwaysLast&&(o="afterexit");var a=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&on()};return N.on(o,r),a}},on=function(){!Tt||!Ze(global.process)||(Tt=!1,Rt.forEach(function(t){try{z.removeListener(t,an[t])}catch{}}),z.emit=sn,z.reallyExit=fo,N.count-=1)},Et.exports.unload=on,Je=function(t,o,a){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,a))},an={},Rt.forEach(function(r){an[r]=function(){if(!!Ze(global.process)){var o=z.listeners(r);o.length===N.count&&(on(),Je("exit",null,r),Je("afterexit",null,r),vs&&r==="SIGHUP"&&(r="SIGINT"),z.kill(z.pid,r))}}}),Et.exports.signals=function(){return Rt},Tt=!1,co=function(){Tt||!Ze(global.process)||(Tt=!0,N.count+=1,Rt=Rt.filter(function(t){try{return z.on(t,an[t]),!0}catch{return!1}}),z.emit=Is,z.reallyExit=ks)},Et.exports.load=co,fo=z.reallyExit,ks=function(t){!Ze(global.process)||(z.exitCode=t||0,Je("exit",z.exitCode,null),Je("afterexit",z.exitCode,null),fo.call(z,z.exitCode))},sn=z.emit,Is=function(t,o){if(t==="exit"&&Ze(global.process)){o!==void 0&&(z.exitCode=o);var a=sn.apply(this,arguments);return Je("exit",z.exitCode,null),Je("afterexit",z.exitCode,null),a}else return sn.apply(this,arguments)}):Et.exports=function(){};var As,Rt,vs,rr,N,on,Je,an,Tt,co,fo,ks,sn,Is});var Os=A((Zh,xs)=>{"use strict";var uf=require("os"),cf=Bs(),ff=1e3*5,df=(r,t="SIGTERM",o={})=>{let a=r(t);return hf(r,t,o,a),a},hf=(r,t,o,a)=>{if(!mf(t,o,a))return;let s=bf(o),u=setTimeout(()=>{r("SIGKILL")},s);u.unref&&u.unref()},mf=(r,{forceKillAfterTimeout:t},o)=>pf(r)&&t!==!1&&o,pf=r=>r===uf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",bf=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return ff;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},yf=(r,t)=>{r.kill()&&(t.isCanceled=!0)},gf=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Sf=(r,{timeout:t,killSignal:o="SIGTERM"},a)=>{if(t===0||t===void 0)return a;let s,u=new Promise((p,m)=>{s=setTimeout(()=>{gf(r,o,m)},t)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([u,f])},_f=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},wf=async(r,{cleanup:t,detached:o},a)=>{if(!t||o)return a;let s=cf(()=>{r.kill()});return a.finally(()=>{s()})};xs.exports={spawnedKill:df,spawnedCancel:yf,setupTimeout:Sf,validateTimeout:_f,setExitHandler:wf}});var Ds=A((Jh,qs)=>{"use strict";var ge=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";ge.writable=r=>ge(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";ge.readable=r=>ge(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";ge.duplex=r=>ge.writable(r)&&ge.readable(r);ge.transform=r=>ge.duplex(r)&&typeof r._transform=="function";qs.exports=ge});var Ws=A((em,Fs)=>{"use strict";var{PassThrough:Rf}=require("stream");Fs.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,a=o==="buffer",s=!1;t?s=!(o||a):o=o||"utf8",a&&(o=null);let u=new Rf({objectMode:s});o&&u.setEncoding(o);let f=0,p=[];return u.on("data",m=>{p.push(m),s?f=p.length:f+=m.length}),u.getBufferedValue=()=>t?p:a?Buffer.concat(p,f):p.join(""),u.getBufferedLength=()=>f,u}});var Ls=A((tm,nr)=>{"use strict";var{constants:Tf}=require("buffer"),Ef=require("stream"),{promisify:Cf}=require("util"),Pf=Ws(),Af=Cf(Ef.pipeline),ho=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function mo(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,a=Pf(t);return await new Promise((s,u)=>{let f=p=>{p&&a.getBufferedLength()<=Tf.MAX_LENGTH&&(p.bufferedData=a.getBufferedValue()),u(p)};(async()=>{try{await Af(r,a),s()}catch(p){f(p)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new ho)})}),a.getBufferedValue()}nr.exports=mo;nr.exports.buffer=(r,t)=>mo(r,{...t,encoding:"buffer"});nr.exports.array=(r,t)=>mo(r,{...t,array:!0});nr.exports.MaxBufferError=ho});var zs=A((rm,$s)=>{"use strict";var{PassThrough:vf}=require("stream");$s.exports=function(){var r=[],t=new vf({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=a,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",s.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function a(){return r.length==0}function s(u){r=r.filter(function(f){return f!==u}),!r.length&&t.readable&&t.end()}}});var Ns=A((nm,Us)=>{"use strict";var Ms=Ds(),js=Ls(),kf=zs(),If=(r,t)=>{t===void 0||r.stdin===void 0||(Ms(t)?t.pipe(r.stdin):r.stdin.end(t))},Bf=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=kf();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},po=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},bo=(r,{encoding:t,buffer:o,maxBuffer:a})=>{if(!(!r||!o))return t?js(r,{encoding:t,maxBuffer:a}):js.buffer(r,{maxBuffer:a})},xf=async({stdout:r,stderr:t,all:o},{encoding:a,buffer:s,maxBuffer:u},f)=>{let p=bo(r,{encoding:a,buffer:s,maxBuffer:u}),m=bo(t,{encoding:a,buffer:s,maxBuffer:u}),b=bo(o,{encoding:a,buffer:s,maxBuffer:u*2});try{return await Promise.all([f,p,m,b])}catch(w){return Promise.all([{error:w,signal:w.signal,timedOut:w.timedOut},po(r,p),po(t,m),po(o,b)])}},Of=({input:r})=>{if(Ms(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};Us.exports={handleInput:If,makeAllStream:Bf,getSpawnedResult:xf,validateInputSync:Of}});var Gs=A((om,Hs)=>{"use strict";var qf=(async()=>{})().constructor.prototype,Df=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(qf,r)]),Ff=(r,t)=>{for(let[o,a]of Df){let s=typeof t=="function"?(...u)=>Reflect.apply(a.value,t(),u):a.value.bind(t);Reflect.defineProperty(r,o,{...a,value:s})}return r},Wf=r=>new Promise((t,o)=>{r.on("exit",(a,s)=>{t({exitCode:a,signal:s})}),r.on("error",a=>{o(a)}),r.stdin&&r.stdin.on("error",a=>{o(a)})});Hs.exports={mergePromise:Ff,getSpawnedPromise:Wf}});var Qs=A((im,Ys)=>{"use strict";var Vs=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Lf=/^[\w.-]+$/,$f=/"/g,zf=r=>typeof r!="string"||Lf.test(r)?r:`"${r.replace($f,'\\"')}"`,Mf=(r,t)=>Vs(r,t).join(" "),jf=(r,t)=>Vs(r,t).map(o=>zf(o)).join(" "),Uf=/ +/g,Nf=r=>{let t=[];for(let o of r.trim().split(Uf)){let a=t[t.length-1];a&&a.endsWith("\\")?t[t.length-1]=`${a.slice(0,-1)} ${o}`:t.push(o)}return t};Ys.exports={joinCommand:Mf,getEscapedCommand:jf,parseCommand:Nf}});var rl=A((am,Ct)=>{"use strict";var Hf=require("path"),yo=require("child_process"),Gf=as(),Vf=ls(),Yf=fs(),Qf=ps(),ln=Ts(),Xs=Cs(),{spawnedKill:Xf,spawnedCancel:Kf,setupTimeout:Zf,validateTimeout:Jf,setExitHandler:ed}=Os(),{handleInput:td,getSpawnedResult:rd,makeAllStream:nd,validateInputSync:od}=Ns(),{mergePromise:Ks,getSpawnedPromise:id}=Gs(),{joinCommand:Zs,parseCommand:Js,getEscapedCommand:el}=Qs(),ad=1e3*1e3*100,sd=({env:r,extendEnv:t,preferLocal:o,localDir:a,execPath:s})=>{let u=t?{...process.env,...r}:r;return o?Yf.env({env:u,cwd:a,execPath:s}):u},tl=(r,t,o={})=>{let a=Gf._parse(r,t,o);return r=a.command,t=a.args,o=a.options,o={maxBuffer:ad,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=sd(o),o.stdio=Xs(o),process.platform==="win32"&&Hf.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:a}},or=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Vf(t):t,un=(r,t,o)=>{let a=tl(r,t,o),s=Zs(r,t),u=el(r,t);Jf(a.options);let f;try{f=yo.spawn(a.file,a.args,a.options)}catch(g){let y=new yo.ChildProcess,C=Promise.reject(ln({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return Ks(y,C)}let p=id(f),m=Zf(f,a.options,p),b=ed(f,a.options,m),w={isCanceled:!1};f.kill=Xf.bind(null,f.kill.bind(f)),f.cancel=Kf.bind(null,f,w);let S=Qf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,D,H]=await rd(f,a.options,b),I=or(a.options,v),M=or(a.options,D),x=or(a.options,H);if(g||y!==0||C!==null){let le=ln({error:g,exitCode:y,signal:C,stdout:I,stderr:M,all:x,command:s,escapedCommand:u,parsed:a,timedOut:P,isCanceled:w.isCanceled,killed:f.killed});if(!a.options.reject)return le;throw le}return{command:s,escapedCommand:u,exitCode:0,stdout:I,stderr:M,all:x,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return td(f,a.options.input),f.all=nd(f,a.options),Ks(f,S)};Ct.exports=un;Ct.exports.sync=(r,t,o)=>{let a=tl(r,t,o),s=Zs(r,t),u=el(r,t);od(a.options);let f;try{f=yo.spawnSync(a.file,a.args,a.options)}catch(b){throw ln({error:b,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let p=or(a.options,f.stdout,f.error),m=or(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let b=ln({stdout:p,stderr:m,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:u,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return b;throw b}return{command:s,escapedCommand:u,exitCode:0,stdout:p,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Ct.exports.command=(r,t)=>{let[o,...a]=Js(r);return un(o,a,t)};Ct.exports.commandSync=(r,t)=>{let[o,...a]=Js(r);return un.sync(o,a,t)};Ct.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let a=Xs.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:f=s}=o;return un(u,[...f,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1})}});var md={};qi(md,{default:()=>hd});var $e=require("@raycast/api");var ye=require("@raycast/api"),yt=require("react");var ya=pe(require("http"),1),ga=pe(require("https"),1),Ke=pe(require("zlib"),1),ne=pe(require("stream"),1),Jt=require("buffer");function Uu(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),a="",s=!1,u=o[0]||"text/plain",f=u;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(f+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(a=o[w].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let p=s?"base64":"ascii",m=unescape(r.substring(t+1)),b=Buffer.from(m,p);return b.type=u,b.typeFull=f,b.charset=a,b}var Wi=Uu;var ae=pe(require("stream"),1),Pe=require("util"),te=require("buffer");Nt();Mr();var De=class extends Error{constructor(t,o){super(t);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends De{constructor(t,o,a){super(t,o);a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var jr=Symbol.toStringTag,Gn=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[jr]==="URLSearchParams",Yt=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[jr]),Yi=r=>typeof r=="object"&&(r[jr]==="AbortSignal"||r[jr]==="EventTarget"),Qi=(r,t)=>{let o=new URL(t).hostname,a=new URL(r).hostname;return o===a||o.endsWith(`.${a}`)};var ac=(0,Pe.promisify)(ae.default.pipeline),X=Symbol("Body internals"),Ae=class{constructor(t,{size:o=0}={}){let a=null;t===null?t=null:Gn(t)?t=te.Buffer.from(t.toString()):Yt(t)||te.Buffer.isBuffer(t)||(Pe.types.isAnyArrayBuffer(t)?t=te.Buffer.from(t):ArrayBuffer.isView(t)?t=te.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ae.default||(t instanceof Ve?(t=Gi(t),a=t.type.split("=")[1]):t=te.Buffer.from(String(t))));let s=t;te.Buffer.isBuffer(t)?s=ae.default.Readable.from(t):Yt(t)&&(s=ae.default.Readable.from(t.stream())),this[X]={body:t,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,t instanceof ae.default&&t.on("error",u=>{let f=u instanceof De?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[X].error=f})}get body(){return this[X].stream}get bodyUsed(){return this[X].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:a}=await Hr(this);return t.slice(o,o+a)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let a=new Ve,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(ra(),ta));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[X].body&&this[X].body.type||"",o=await this.arrayBuffer();return new Ee([o],{type:t})}async json(){let t=await Hr(this);return JSON.parse(t.toString())}async text(){return(await Hr(this)).toString()}buffer(){return Hr(this)}};Ae.prototype.buffer=(0,Pe.deprecate)(Ae.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Ae.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Pe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Hr(r){if(r[X].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[X].disturbed=!0,r[X].error)throw r[X].error;let{body:t}=r;if(t===null)return te.Buffer.alloc(0);if(!(t instanceof ae.default))return te.Buffer.alloc(0);let o=[],a=0;try{for await(let s of t){if(r.size>0&&a+s.length>r.size){let u=new ee(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}a+=s.length,o.push(s)}}catch(s){throw s instanceof De?s:new ee(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?te.Buffer.from(o.join("")):te.Buffer.concat(o,a)}catch(s){throw new ee(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new ee(`Premature close of server response while trying to fetch ${r.url}`)}var pt=(r,t)=>{let o,a,{body:s}=r[X];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ae.default&&typeof s.getBoundary!="function"&&(o=new ae.PassThrough({highWaterMark:t}),a=new ae.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(a),r[X].stream=o,s=a),s},sc=(0,Pe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Gr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Gn(r)?"application/x-www-form-urlencoded;charset=UTF-8":Yt(r)?r.type||null:te.Buffer.isBuffer(r)||Pe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ve?`multipart/form-data; boundary=${t[X].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${sc(r)}`:r instanceof ae.default?null:"text/plain;charset=UTF-8",na=r=>{let{body:t}=r[X];return t===null?0:Yt(t)?t.size:te.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},oa=async(r,{body:t})=>{t===null?r.end():await ac(t,r)};var Qn=require("util"),Kt=pe(require("http"),1),Vr=typeof Kt.default.validateHeaderName=="function"?Kt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Xn=typeof Kt.default.validateHeaderValue=="function"?Kt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},re=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof re){let a=t.raw();for(let[s,u]of Object.entries(a))o.push(...u.map(f=>[s,f]))}else if(t!=null)if(typeof t=="object"&&!Qn.types.isBoxedPrimitive(t)){let a=t[Symbol.iterator];if(a==null)o.push(...Object.entries(t));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||Qn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([a,s])=>(Vr(a),Xn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0;super(o);return new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,p)=>(Vr(f),Xn(f,String(p)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(Vr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(t)&&(a=a.toLowerCase()),a}forEach(t,o=void 0){for(let a of this.keys())Reflect.apply(t,o,[this.get(a),a,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let a=this.getAll(o);return o==="host"?t[o]=a[0]:t[o]=a.length>1?a:a[0],t},{})}};Object.defineProperties(re.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function ia(r=[]){return new re(r.reduce((t,o,a,s)=>(a%2===0&&t.push(s.slice(a,a+2)),t),[]).filter(([t,o])=>{try{return Vr(t),Xn(t,String(o)),!0}catch{return!1}}))}var lc=new Set([301,302,303,307,308]),Yr=r=>lc.has(r);var he=Symbol("Response internals"),Y=class extends Ae{constructor(t=null,o={}){super(t,o);let a=o.status!=null?o.status:200,s=new re(o.headers);if(t!==null&&!s.has("Content-Type")){let u=Gr(t,this);u&&s.append("Content-Type",u)}this[he]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[he].type}get url(){return this[he].url||""}get status(){return this[he].status}get ok(){return this[he].status>=200&&this[he].status<300}get redirected(){return this[he].counter>0}get statusText(){return this[he].statusText}get headers(){return this[he].headers}get highWaterMark(){return this[he].highWaterMark}clone(){return new Y(pt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Yr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Y(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new Y(null,{status:0,statusText:""});return t[he].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Y.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ma=require("url"),pa=require("util");var aa=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var sa=require("net");function la(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ua=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ca="strict-origin-when-cross-origin";function fa(r){if(!ua.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function uc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,sa.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function bt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:uc(r)}function da(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let a=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=la(s),f=la(s,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),o&&(f=o(f));let p=new URL(r.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return bt(u)&&!bt(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===p.origin?u:bt(u)&&!bt(p)?"no-referrer":f;case"same-origin":return u.origin===p.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===p.origin?u:f;case"no-referrer-when-downgrade":return bt(u)&&!bt(p)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function ha(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of t)a&&ua.has(a)&&(o=a);return o}var U=Symbol("Request internals"),Qr=r=>typeof r=="object"&&typeof r[U]=="object",cc=(0,pa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),We=class extends Ae{constructor(t,o={}){let a;if(Qr(t)?a=new URL(t.url):(a=new URL(t),t={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentails.`);let s=o.method||t.method||"GET";if(s=s.toUpperCase(),"data"in o&&cc(),(o.body!=null||Qr(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Qr(t)&&t.body!==null?pt(t):null;super(u,{size:o.size||t.size||0});let f=new re(o.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let b=Gr(u,this);b&&f.set("Content-Type",b)}let p=Qr(t)?t.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!Yi(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?t.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let b=new URL(m);m=/^about:(\/\/)?client$/.test(b)?"client":b}else m=void 0;this[U]={method:s,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:a,signal:p,referrer:m},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[U].method}get url(){return(0,ma.format)(this[U].parsedURL)}get headers(){return this[U].headers}get redirect(){return this[U].redirect}get signal(){return this[U].signal}get referrer(){if(this[U].referrer==="no-referrer")return"";if(this[U].referrer==="client")return"about:client";if(this[U].referrer)return this[U].referrer.toString()}get referrerPolicy(){return this[U].referrerPolicy}set referrerPolicy(t){this[U].referrerPolicy=fa(t)}clone(){return new We(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(We.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ba=r=>{let{parsedURL:t}=r[U],o=new re(r[U].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(a="0"),r.body!==null){let p=na(r);typeof p=="number"&&!Number.isNaN(p)&&(a=String(p))}a&&o.set("Content-Length",a),r.referrerPolicy===""&&(r.referrerPolicy=ca),r.referrer&&r.referrer!=="no-referrer"?r[U].referrer=da(r):r[U].referrer="no-referrer",r[U].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=aa(t),f={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:f}};var Zt=class extends De{constructor(t,o="aborted"){super(t,o)}};Mr();Yn();var fc=new Set(["data:","http:","https:"]);async function Xr(r,t){return new Promise((o,a)=>{let s=new We(r,t),{parsedURL:u,options:f}=ba(s);if(!fc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=Wi(s.url),C=new Y(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(u.protocol==="https:"?ga.default:ya.default).request,{signal:m}=s,b=null,w=()=>{let y=new Zt("The operation was aborted.");a(y),s.body&&s.body instanceof ne.default.Readable&&s.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(m&&m.aborted){w();return}let T=()=>{w(),g()},S=p(u.toString(),f);m&&m.addEventListener("abort",T);let g=()=>{S.abort(),m&&m.removeEventListener("abort",T)};S.on("error",y=>{a(new ee(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),dc(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=ia(y.rawHeaders);if(Yr(y.statusCode)){let I=C.get("Location"),M=null;try{M=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){a(new ee(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":a(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){a(new ee(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let x={headers:new re(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:pt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Qi(s.url,M))for(let K of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(K);if(y.statusCode!==303&&s.body&&t.body instanceof ne.default.Readable){a(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));let le=ha(C);le&&(x.referrerPolicy=le),o(Xr(new We(M,x))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&y.once("end",()=>{m.removeEventListener("abort",T)});let P=(0,ne.pipeline)(y,new ne.PassThrough,I=>{I&&a(I)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},D=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||D===null||y.statusCode===204||y.statusCode===304){b=new Y(P,v),o(b);return}let H={flush:Ke.default.Z_SYNC_FLUSH,finishFlush:Ke.default.Z_SYNC_FLUSH};if(D==="gzip"||D==="x-gzip"){P=(0,ne.pipeline)(P,Ke.default.createGunzip(H),I=>{I&&a(I)}),b=new Y(P,v),o(b);return}if(D==="deflate"||D==="x-deflate"){let I=(0,ne.pipeline)(y,new ne.PassThrough,M=>{M&&a(M)});I.once("data",M=>{(M[0]&15)===8?P=(0,ne.pipeline)(P,Ke.default.createInflate(),x=>{x&&a(x)}):P=(0,ne.pipeline)(P,Ke.default.createInflateRaw(),x=>{x&&a(x)}),b=new Y(P,v),o(b)}),I.once("end",()=>{b||(b=new Y(P,v),o(b))});return}if(D==="br"){P=(0,ne.pipeline)(P,Ke.default.createBrotliDecompress(),I=>{I&&a(I)}),b=new Y(P,v),o(b);return}b=new Y(P,v),o(b)}),oa(S,s).catch(a)})}function dc(r,t){let o=Jt.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;r.on("response",f=>{let{headers:p}=f;a=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),r.on("socket",f=>{let p=()=>{if(a&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}};f.prependListener("close",p),r.on("abort",()=>{f.removeListener("close",p)}),f.on("data",m=>{s=Jt.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=Jt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Jt.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var Sa=r=>{let{accessKey:t,orientation:o}=(0,ye.getPreferenceValues)(),[a,s]=(0,yt.useState)({results:[],isLoading:!0}),u=(0,yt.useRef)(null);try{if(!t)throw new Error("Missing API key.");(0,yt.useEffect)(()=>(f(""),()=>{u.current?.abort()}),[]);let f=async p=>{u.current?.abort(),u.current=new AbortController;try{if(p===""){s(w=>({...w,isLoading:!1}));return}s(w=>({...w,isLoading:!0}));let{errors:m,results:b}=await hc({accessKey:t,signal:u.current?.signal,searchText:p,options:{orientation:o,type:r||"photos"}});m?.length&&(0,ye.showToast)(ye.ToastStyle.Failure,`Failed to fetch ${r}.`,m?.join(`
`)),s(w=>({...w,isLoading:!1,results:b||[]}))}catch(m){if(m instanceof Zt)return;(0,ye.showToast)(ye.ToastStyle.Failure,"Could not perform search",String(m))}};return{state:a,search:f}}catch(f){console.error(f);let p={search:()=>({}),state:{results:[],isLoading:!1}};return(0,ye.showToast)(ye.ToastStyle.Failure,"Something went wrong",String(f)),p}},hc=async({searchText:r,options:t,accessKey:o,signal:a})=>{let s=new URLSearchParams({page:"1",query:r,per_page:"30"});t.orientation!=="all"&&s.append("orientation",t.orientation);let{errors:u,results:f}=await Xr(`https://api.unsplash.com/search/${t.type}?${s.toString()}`,{method:"GET",signal:a,headers:{Authorization:`Client-ID ${o}`}}).then(p=>p.json());return{results:f,errors:u}};var F=require("@raycast/api");var ir=require("@raycast/api");var nl=pe(require("process"),1),ol=pe(rl(),1);async function Pt(r){if(nl.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,ol.default)("osascript",["-e",r]);return t}var il=async({url:r,id:t})=>{let{downloadSize:o}=(0,ir.getPreferenceValues)();try{await(0,ir.showHUD)("Please select a location to save the image..."),await Pt(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${t}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd
    `)}catch(a){console.error(a),await(0,ir.showHUD)("Couldn't save the image...")}};var se=require("@raycast/api");var al=require("fs"),sl=async({url:r,id:t,useHud:o=!1})=>{let a;o||(a=await(0,se.showToast)(se.ToastStyle.Animated,"Downloading and setting wallpaper..."));let{downloadSize:s,applyTo:u}=(0,se.getPreferenceValues)(),f=se.environment.supportPath,p=f.endsWith("/")?`${f}${t}-${s}.jpg`:`${f}/${t}-${s}.jpg`;try{let m=p,b=(0,al.existsSync)(m)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;if(await Pt(`
      set temp_folder to (POSIX path of "${m}")
      set q_temp_folder to quoted form of temp_folder

      ${b}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${u} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");o?await(0,se.showHUD)("Wallpaper set!"):a&&(a.style=se.ToastStyle.Success,a.title="Wallpaper set!")}catch(m){console.error(m),a&&(a.style=se.ToastStyle.Failure,a.title="Something went wrong.",a.message="Try with another image or check your internet connection.")}};var Le=require("@raycast/api");var ll=require("fs"),ul=async({url:r,id:t})=>{let o=await(0,Le.showToast)(Le.ToastStyle.Animated,"Downloading and copying image..."),a=Le.environment.supportPath,s=a.endsWith("/")?`${a}${t}.jpg`:`${a}/${t}.jpg`;try{let u=s,f=(0,ll.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;await Pt(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${f}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=Le.ToastStyle.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=Le.ToastStyle.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var cl=require("@raycast/api");var ld=({result:r})=>{let t=r.urls?.regular||r.urls?.small||r.urls?.thumb,o=r.created_at?new Date(r.created_at).toLocaleString():"Unknown",a=[r.description&&`# ${r.description}`,r.user?.name&&`**Photo by [${r.user.name}](${r.user.links.html})**`,t&&`![image](${t})`,r.alt_description&&`**Description**: ${r.alt_description}`,r.created_at&&`**Uploaded On**: ${o}`,r.likes&&`**Likes**: ${r.likes}`,r.width&&r.height&&`**Ratio**: ${r.width}x${r.height}`];return _jsx(cl.Detail,{markdown:a.filter(s=>s).map(s=>s+`
`).join(`
`),navigationTitle:r.user?.name,actions:_jsx(cn,{item:r})})},fl=ld;var ud=({details:r=!1,item:t})=>_jsx(F.ActionPanel,null,_jsx(cd,{details:r,item:t})),cd=({details:r=!1,item:t})=>{let{push:o}=(0,F.useNavigation)(),{downloadSize:a}=(0,F.getPreferenceValues)(),s=t.urls?.raw||t.urls?.full||t.urls?.regular||t.urls?.small,u={url:t.urls?.[a]||s,id:`${t.id}-${a}`};return _jsx(_jsxFragment,null,_jsx(F.ActionPanel.Section,null,r&&_jsx(F.ActionPanel.Item,{title:"Show Details",icon:F.Icon.List,onAction:()=>o(_jsx(fl,{result:t}))}),t.links?.html&&_jsx(F.OpenInBrowserAction,{url:t.links.html,title:"Open Original"}),t.user?.links?.html&&_jsx(F.OpenInBrowserAction,{url:t.user.links.html,icon:F.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})),_jsx(F.ActionPanel.Section,{title:"Image"},s&&_jsx(_jsxFragment,null,_jsx(F.ActionPanel.Item,{title:"Copy to Clipboard",icon:F.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>ul(u)}),_jsx(F.ActionPanel.Item,{title:"Set as Desktop Wallpaper",icon:F.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>sl({url:s,id:String(t.id)})}),_jsx(F.ActionPanel.Item,{title:"Download Image",icon:F.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>il({url:s,id:String(t.id)})}))),_jsx(F.ActionPanel.Section,{title:"Links"},t.links?.html&&_jsx(F.CopyToClipboardAction,{content:t.links.html,title:"Copy URL to Clipboard",icon:F.Icon.Clipboard}),s&&_jsx(F.CopyToClipboardAction,{content:s,title:"Copy Image URL to Clipboard",icon:F.Icon.Clipboard}),t.user?.links?.html&&_jsx(F.CopyToClipboardAction,{content:t.user.links.html,title:"Copy Author URL to Clipboard",icon:F.Icon.Clipboard})))},cn=ud;var fd=()=>{let{state:r,search:t}=Sa("photos");return _jsx($e.List,{isLoading:r.isLoading,onSearchTextChange:t,searchBarPlaceholder:"Search wallpapers...",throttle:!0},_jsx($e.List.Section,{title:"Results",subtitle:String(r?.results?.length)},r.results.map(o=>_jsx(dd,{key:o.id,searchResult:o}))))},dd=({searchResult:r})=>{let[t,o,a,s]=[r.description||r.alt_description||r.user.name||"No Name",r.description?r.alt_description:void 0,r.urls?.thumb||r.urls?.small||r.urls?.regular,r?.user?.profile_image?.small];return _jsx($e.List.Item,{title:t,icon:a,subtitle:o,accessoryTitle:r.user.name,accessoryIcon:{source:s||$e.Icon.Person,mask:$e.ImageMask.Circle},actions:_jsx(cn,{item:r,details:!0})})},hd=fd;module.exports=ju(md);0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
