"use strict";var U=Object.defineProperty;var se=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ae=Object.prototype.hasOwnProperty;var re=(t,e)=>{for(var s in e)U(t,s,{get:e[s],enumerable:!0})},ce=(t,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of oe(e))!ae.call(t,r)&&r!==s&&U(t,r,{get:()=>e[r],enumerable:!(a=se(e,r))||a.enumerable});return t};var ie=t=>ce(U({},"__esModule",{value:!0}),t);var Ue={};re(Ue,{default:()=>ne});module.exports=ie(Ue);var n=require("@raycast/api"),h=require("react");var le=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Ce=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),fe=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),ue=/[^\p{L}\d]+/giu,X="$1\0$2",J="";function W(t){let e=t.trim();e=e.replace(le,X).replace(Ce,X),e=e.replace(ue,"\0");let s=0,a=e.length;for(;e.charAt(s)==="\0";)s++;if(s===a)return[];for(;e.charAt(a-1)==="\0";)a--;return e.slice(s,a).split(/\0/g)}function pe(t){let e=W(t);for(let s=0;s<e.length;s++){let a=e[s],r=fe.exec(a);if(r){let i=r.index+(r[1]??r[2]).length;e.splice(s,1,a.slice(0,i),a.slice(i))}}return e}function P(t,e){let[s,a,r]=L(t,e);return s+a.map(k(e?.locale)).join(e?.delimiter??" ")+r}function B(t,e){let[s,a,r]=L(t,e),i=k(e?.locale),l=_(e?.locale),p=e?.mergeAmbiguousCharacters?M(i,l):G(i,l);return s+a.map((u,m)=>m===0?i(u):p(u,m)).join(e?.delimiter??"")+r}function H(t,e){let[s,a,r]=L(t,e),i=k(e?.locale),l=_(e?.locale),p=e?.mergeAmbiguousCharacters?M(i,l):G(i,l);return s+a.map(p).join(e?.delimiter??"")+r}function K(t,e){return E(t,{delimiter:"_",...e})}function E(t,e){let[s,a,r]=L(t,e),i=k(e?.locale),l=_(e?.locale);return s+a.map(M(i,l)).join(e?.delimiter??" ")+r}function v(t,e){let[s,a,r]=L(t,e);return s+a.map(_(e?.locale)).join(e?.delimiter??"_")+r}function Q(t,e){return P(t,{delimiter:".",...e})}function N(t,e){return P(t,{delimiter:"-",...e})}function V(t,e){return P(t,{delimiter:"/",...e})}function q(t,e){return P(t,{delimiter:"_",...e})}function O(t,e){return E(t,{delimiter:"-",...e})}function k(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function _(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function M(t,e){return s=>`${e(s[0])}${t(s.slice(1))}`}function G(t,e){return(s,a)=>{let r=s[0];return(a>0&&r>="0"&&r<="9"?"_"+r:e(r))+t(s.slice(1))}}function L(t,e={}){let s=e.split??(e.separateNumbers?pe:W),a=e.prefixCharacters??J,r=e.suffixCharacters??J,i=0,l=t.length;for(;i<t.length;){let p=t.charAt(i);if(!a.includes(p))break;i++}for(;l>i;){let p=l-1,u=t.charAt(p);if(!r.includes(u))break;l=p}return[t.slice(0,i),s(t.slice(i,l)),t.slice(l)]}function $(t,e){let s="";for(let a of t)s+=Math.random()>.5?a.toLocaleUpperCase(e):a.toLocaleLowerCase(e);return s}function Y(t,e){let s="";for(let a of t){let r=a.toLocaleLowerCase(e);s+=a===r?a.toLocaleUpperCase(e):r}return s}var me=/(\S+)|(.)/g,he=new RegExp("[\\.#]\\p{Alphabetic}","u"),ge=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),Ae=new RegExp("\\p{Alphabetic}+","gu"),xe=new RegExp("^(\\P{Alphabetic})*(?:\\p{Alphabetic}\\.){2,}(\\P{Alphabetic})*$","u"),Se=new Set(["\u2014","\u2013","-","\u2015","/"]),Z=new Set([".","!","?"]),we=new Set([...Z,":",'"',"'","\u201D"]),Te=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function j(t,e={}){let{locale:s=void 0,sentenceCase:a=!1,sentenceTerminators:r=Z,titleTerminators:i=we,smallWords:l=Te,wordSeparators:p=Se}=typeof e=="string"||Array.isArray(e)?{locale:e}:e,u=a?r:i,m="",d=!0;for(let y of t.matchAll(me)){let{1:C,2:g,index:b=0}=y;if(g){m+=g;continue}if(he.test(C)){let x=C.match(xe);if(x){let[w,A="",o=""]=x;m+=a&&!d?C:z(C,A.length,s),d=u.has(o.charAt(0));continue}m+=C,d=u.has(C.charAt(C.length-1))}else{let x=Array.from(C.matchAll(Ae)),w=C,A=!1;for(let o=0;o<x.length;o++){let{0:f,index:T=0}=x[o],S=C.charAt(T+f.length);if(A=u.has(S),d)d=!1;else{if(a||ge.test(f))continue;if(x.length===1){if(l.has(f)&&!(b+C.length===t.length)&&!A)continue}else if(o>0&&(!p.has(C.charAt(T-1))||l.has(f)&&p.has(S)))continue}w=z(w,T,s)}m+=w,d=A||u.has(C.charAt(C.length-1))}}return m}function z(t,e,s){return t.slice(0,e)+t.charAt(e).toLocaleUpperCase(s)+t.slice(e+1)}var ye=t=>t.toLowerCase(),Pe=t=>t.length<=1?t.toLowerCase():t[0].toLowerCase()+t.slice(1),Le=t=>j(t,{sentenceCase:!0}),Re=t=>t.toUpperCase(),be=t=>t.length<=1?t.toUpperCase():t[0].toUpperCase()+t.slice(1),R={"Camel Case":B,"Capital Case":E,"Constant Case":v,"Dot Case":Q,"Header Case":O,"Kebab Case":N,"Lower Case":ye,"Lower First":Pe,"Macro Case":v,"No Case":P,"Param Case":N,"Pascal Case":H,"Pascal Snake Case":K,"Path Case":V,"Random Case":$,"Sentence Case":Le,"Snake Case":q,"Swap Case":Y,"Title Case":j,"Upper Case":Re,"Upper First":be,"Sponge Case":$,"Train Case":O},Je=Object.keys(R);var c=require("react/jsx-runtime"),I=class t extends Error{constructor(){super("No text"),Object.setPrototypeOf(this,t.prototype)}};async function Ee(){try{return await(0,n.getSelectedText)()}catch{return""}}async function ee(t){let e=await n.Clipboard.readText(),s=await Ee();if(t==="clipboard"){if(e)return e;if(s)return s}else{if(s)return s;if(e)return e}throw new I}function te(t,e){return e?t.toLowerCase():t}function D(t,e){let s=[],a=[],r=t.split(`
`);for(let i of r){let l=R[e](te(i,!0));s.push(l),a.push((l.length===0?"\u200B":l)+`
`)}return{rawText:s.join(`
`),markdown:a.join(`
`)}}var F=new n.Cache,ke=()=>{let t=F.get("pinned");return t?JSON.parse(t):[]},_e=()=>{let t=F.get("recent");return t?JSON.parse(t):[]},Ie=t=>{F.set("pinned",JSON.stringify(t))},Fe=t=>{F.set("recent",JSON.stringify(t))};function ne(t){let e=(0,n.getPreferenceValues)(),s=e.source,a=e.action,r=e.lowercaseTextBeforeTransform,i=t.launchContext?.case;if(i){(async()=>{let o=await ee(s).then(T=>te(T,r)),f=R[i](o);a==="paste"?n.Clipboard.paste(f):n.Clipboard.copy(f),(0,n.showHUD)(`Converted to ${i}`),(0,n.popToRoot)()})();return}let[l,p]=(0,h.useState)(""),[u,m]=(0,h.useState)(),[d,y]=(0,h.useState)([]),[C,g]=(0,h.useState)([]);(0,h.useEffect)(()=>{y(ke()),g(_e()),(0,n.getFrontmostApplication)().then(m)},[]),(0,h.useEffect)(()=>{Ie(d)},[d]),(0,h.useEffect)(()=>{Fe(C)},[C]);let b=async()=>{try{p(await ee(s))}catch(o){o instanceof I&&(0,n.showToast)({style:n.Toast.Style.Failure,title:"Nothing to convert",message:"Please ensure that text is either selected or copied"})}};(0,h.useEffect)(()=>{b()},[]);let x=o=>(0,c.jsx)(n.Action,{title:"Copy to Clipboard",icon:n.Icon.Clipboard,onAction:()=>{o.pinned||g([o.case,...C.filter(f=>f!==o.case)].slice(0,4)),(0,n.showHUD)("Copied to Clipboard"),n.Clipboard.copy(o.modified),e.popToRoot?(0,n.popToRoot)():(0,n.closeMainWindow)()}}),w=o=>u?(0,c.jsx)(n.Action,{title:`Paste in ${u.name}`,icon:{fileIcon:u.path},onAction:()=>{o.pinned||g([o.case,...C.filter(f=>f!==o.case)].slice(0,4)),(0,n.showHUD)(`Pasted in ${u.name}`),n.Clipboard.paste(o.modified),e.popToRoot?(0,n.popToRoot)():(0,n.closeMainWindow)()}}):null,A=o=>{let f=encodeURIComponent(`{"case":"${o.case}"}`),T=`raycast://extensions/erics118/${n.environment.extensionName}/${n.environment.commandName}?context=${f}`;return(0,c.jsx)(n.List.Item,{id:o.case,title:o.case,accessories:[{text:o.modified}],detail:(0,c.jsx)(n.List.Item.Detail,{markdown:o.detail}),actions:(0,c.jsxs)(n.ActionPanel,{children:[(0,c.jsxs)(n.ActionPanel.Section,{children:[a==="paste"&&(0,c.jsx)(w,{...o}),(0,c.jsx)(x,{...o}),a==="copy"&&(0,c.jsx)(w,{...o})]}),(0,c.jsxs)(n.ActionPanel.Section,{children:[o.pinned?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Pinned Case",icon:n.Icon.PinDisabled,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{y(d.filter(S=>S!==o.case))}}),(0,c.jsx)(n.Action,{title:"Clear Pinned Cases",style:n.Action.Style.Destructive,icon:{source:n.Icon.XMarkCircle},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{y([])}})]}):(0,c.jsx)(n.Action,{title:"Pin Case",icon:n.Icon.Pin,shortcut:n.Keyboard.Shortcut.Common.Pin,onAction:()=>{y([o.case,...d]),o.recent&&g(C.filter(S=>S!==o.case))}}),o.recent&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Recent Case",icon:n.Icon.XMarkCircle,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{g(C.filter(S=>S!==o.case))}}),(0,c.jsx)(n.Action,{title:"Clear Recent Cases",icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{g([])}})]}),(0,c.jsx)(n.Action.CreateQuicklink,{title:`Create Quicklink to Convert to ${o.case}`,quicklink:{name:`Convert to ${o.case}`,link:T}})]}),(0,c.jsx)(n.ActionPanel.Section,{children:(0,c.jsx)(n.Action,{title:"Refresh Content",icon:n.Icon.RotateAntiClockwise,shortcut:n.Keyboard.Shortcut.Common.Refresh,onAction:b})})]})})};return(0,c.jsxs)(n.List,{isShowingDetail:!0,children:[(0,c.jsx)(n.List.Section,{title:"Pinned",children:d?.map(o=>{let f=D(l,o);return(0,c.jsx)(A,{case:o,modified:f.rawText,detail:f.markdown,pinned:!0},o)})}),(0,c.jsx)(n.List.Section,{title:"Recent",children:C.map(o=>{let f=D(l,o);return(0,c.jsx)(A,{case:o,modified:f.rawText,detail:f.markdown,recent:!0},o)})}),(0,c.jsx)(n.List.Section,{title:"All Cases",children:Object.keys(R).filter(o=>e[o.replace(/ +/g,"")]&&!C.includes(o)&&!d.includes(o)).map(o=>{let f=D(l,o);return(0,c.jsx)(A,{case:o,modified:f.rawText,detail:f.markdown},o)})})]})}
