var Ke=Object.create;var F=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var Xe=Object.getOwnPropertyNames;var Ge=Object.getPrototypeOf,He=Object.prototype.hasOwnProperty;var he=e=>F(e,"__esModule",{value:!0});var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ze=(e,t)=>{for(var r in t)F(e,r,{get:t[r],enumerable:!0})},me=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Xe(t))!He.call(e,n)&&(r||n!=="default")&&F(e,n,{get:()=>t[n],enumerable:!(i=Ve(t,n))||i.enumerable});return e},N=(e,t)=>me(he(F(e!=null?Ke(Ge(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Qe=(e=>(t,r)=>e&&e.get(t)||(r=me(he({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var ae=p(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.default=tt;var Ze=et(require("crypto"));function et(e){return e&&e.__esModule?e:{default:e}}var j=new Uint8Array(256),$=j.length;function tt(){return $>j.length-16&&(Ze.default.randomFillSync(j),$=0),j.slice($,$+=16)}});var Pe=p(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=void 0;var rt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;b.default=rt});var L=p(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.default=void 0;var nt=it(Pe());function it(e){return e&&e.__esModule?e:{default:e}}function ot(e){return typeof e=="string"&&nt.default.test(e)}var at=ot;J.default=at});var q=p(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.default=void 0;var ct=st(L());function st(e){return e&&e.__esModule?e:{default:e}}var f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).substr(1));function lt(e,t=0){let r=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!(0,ct.default)(r))throw TypeError("Stringified UUID is invalid");return r}var ut=lt;B.default=ut});var Re=p(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.default=void 0;var ft=ye(ae()),dt=ye(q());function ye(e){return e&&e.__esModule?e:{default:e}}var _e,ce,se=0,le=0;function pt(e,t,r){let i=t&&r||0,n=t||new Array(16);e=e||{};let a=e.node||_e,c=e.clockseq!==void 0?e.clockseq:ce;if(a==null||c==null){let u=e.random||(e.rng||ft.default)();a==null&&(a=_e=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),c==null&&(c=ce=(u[6]<<8|u[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),s=e.nsecs!==void 0?e.nsecs:le+1,P=o-se+(s-le)/1e4;if(P<0&&e.clockseq===void 0&&(c=c+1&16383),(P<0||o>se)&&e.nsecs===void 0&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");se=o,le=s,ce=c,o+=122192928e5;let O=((o&268435455)*1e4+s)%4294967296;n[i++]=O>>>24&255,n[i++]=O>>>16&255,n[i++]=O>>>8&255,n[i++]=O&255;let I=o/4294967296*1e4&268435455;n[i++]=I>>>8&255,n[i++]=I&255,n[i++]=I>>>24&15|16,n[i++]=I>>>16&255,n[i++]=c>>>8|128,n[i++]=c&255;for(let u=0;u<6;++u)n[i+u]=a[u];return t||(0,dt.default)(n)}var ht=pt;K.default=ht});var ue=p(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;var mt=gt(L());function gt(e){return e&&e.__esModule?e:{default:e}}function vt(e){if(!(0,mt.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Pt=vt;V.default=Pt});var fe=p(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.default=St;D.URL=D.DNS=void 0;var _t=Se(q()),yt=Se(ue());function Se(e){return e&&e.__esModule?e:{default:e}}function Rt(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var xe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";D.DNS=xe;var Oe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";D.URL=Oe;function St(e,t,r){function i(n,a,c,o){if(typeof n=="string"&&(n=Rt(n)),typeof a=="string"&&(a=(0,yt.default)(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+n.length);if(s.set(a),s.set(n,a.length),s=r(s),s[6]=s[6]&15|t,s[8]=s[8]&63|128,c){o=o||0;for(let P=0;P<16;++P)c[o+P]=s[P];return c}return(0,_t.default)(s)}try{i.name=e}catch{}return i.DNS=xe,i.URL=Oe,i}});var Ce=p(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.default=void 0;var xt=Ot(require("crypto"));function Ot(e){return e&&e.__esModule?e:{default:e}}function Ct(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),xt.default.createHash("md5").update(e).digest()}var Dt=Ct;X.default=Dt});var we=p(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.default=void 0;var wt=De(fe()),It=De(Ce());function De(e){return e&&e.__esModule?e:{default:e}}var Wt=(0,wt.default)("v3",48,It.default),Et=Wt;G.default=Et});var We=p(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.default=void 0;var Mt=Ie(ae()),Tt=Ie(q());function Ie(e){return e&&e.__esModule?e:{default:e}}function kt(e,t,r){e=e||{};let i=e.random||(e.rng||Mt.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=i[n];return t}return(0,Tt.default)(i)}var Nt=kt;H.default=Nt});var Ee=p(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.default=void 0;var At=Lt(require("crypto"));function Lt(e){return e&&e.__esModule?e:{default:e}}function qt(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),At.default.createHash("sha1").update(e).digest()}var Ft=qt;z.default=Ft});var Te=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.default=void 0;var Ut=Me(fe()),$t=Me(Ee());function Me(e){return e&&e.__esModule?e:{default:e}}var jt=(0,Ut.default)("v5",80,$t.default),bt=jt;Q.default=bt});var ke=p(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.default=void 0;var Jt="00000000-0000-0000-0000-000000000000";Y.default=Jt});var Ne=p(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.default=void 0;var Bt=Kt(L());function Kt(e){return e&&e.__esModule?e:{default:e}}function Vt(e){if(!(0,Bt.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Xt=Vt;Z.default=Xt});var Ae=p(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});Object.defineProperty(y,"v1",{enumerable:!0,get:function(){return Gt.default}});Object.defineProperty(y,"v3",{enumerable:!0,get:function(){return Ht.default}});Object.defineProperty(y,"v4",{enumerable:!0,get:function(){return zt.default}});Object.defineProperty(y,"v5",{enumerable:!0,get:function(){return Qt.default}});Object.defineProperty(y,"NIL",{enumerable:!0,get:function(){return Yt.default}});Object.defineProperty(y,"version",{enumerable:!0,get:function(){return Zt.default}});Object.defineProperty(y,"validate",{enumerable:!0,get:function(){return er.default}});Object.defineProperty(y,"stringify",{enumerable:!0,get:function(){return tr.default}});Object.defineProperty(y,"parse",{enumerable:!0,get:function(){return rr.default}});var Gt=x(Re()),Ht=x(we()),zt=x(We()),Qt=x(Te()),Yt=x(ke()),Zt=x(Ne()),er=x(L()),tr=x(q()),rr=x(ue());function x(e){return e&&e.__esModule?e:{default:e}}});var sr={};ze(sr,{default:()=>Je});var d=require("@raycast/api"),be=require("react");var l=require("@raycast/api");var A=(a=>(a.NODE="node",a.MAVEN="maven",a.GRADLE="gradle",a.XCODE="xcode",a.UNKNOWN="unknown",a))(A||{});var ie=require("@raycast/api"),ge=N(require("path")),M=N(require("fs"));function C(e){return`${e.fullPath}/${e.name}~${e.type}`}var R=class{constructor(t){Ye(),this.cacheFile=ge.default.join(ie.environment.supportPath,t+".json"),this.repos=[];try{M.default.accessSync(this.cacheFile,M.default.constants.R_OK)}catch{return}let r=M.default.readFileSync(this.cacheFile).toString();if(r.length>0){let i=JSON.parse(r);this.repos=i.repos}}save(){let t=JSON.stringify(this,null,2)+`
`;M.default.writeFileSync(this.cacheFile,t)}setCache(t){this.repos=t}clear(){this.repos=[],this.save()}addToCache(t){this.repos=this.repos.filter(r=>C(r)!==C(t)),this.repos.push(t)}removeFromCache(t){this.repos=this.repos.filter(r=>C(r)!==C(t))}};function Ye(){M.default.mkdirSync(ie.environment.supportPath,{recursive:!0})}function U(e){let t=new R("recent-projects"),r=new R("pinned-projects");function i(o){t.addToCache(o),t.save()}function n(o){r.addToCache(o),r.save(),(0,l.showToast)(l.Toast.Style.Success,"","Repo pinned.")}function a(o){r.removeFromCache(o),r.save(),(0,l.showToast)(l.Toast.Style.Success,"","Repo un-pinned.")}function c(o,s){return o==="node"?s.openNodeWith:o==="maven"?s.openMavenWith:o==="gradle"?s.openGradleWith:o==="xcode"?s.openXcodeWith:s.openNodeWith}return _jsx(l.ActionPanel,null,_jsx(l.ActionPanel.Section,null,_jsx(l.Action.Open,{title:`Open in ${c(e.repo.type,e.preferences).name}`,icon:{fileIcon:c(e.repo.type,e.preferences).path},target:e.repo.fullPath,application:c(e.repo.type,e.preferences).bundleId,onOpen:()=>i(e.repo)}),e.preferences.openWith1&&_jsx(l.Action.Open,{title:`Open in ${e.preferences.openWith1.name}`,icon:{fileIcon:e.preferences.openWith1.path},target:e.repo.fullPath,application:e.preferences.openWith1.bundleId,shortcut:{modifiers:["opt"],key:"return"},onOpen:()=>i(e.repo)}),e.preferences.openWith2&&_jsx(l.Action.Open,{title:`Open in ${e.preferences.openWith2.name}`,icon:{fileIcon:e.preferences.openWith2.path},target:e.repo.fullPath,application:e.preferences.openWith2.bundleId,shortcut:{modifiers:["ctrl"],key:"return"},onOpen:()=>i(e.repo)}),e.preferences.openWith3&&e.preferences.openWith2?.bundleId!=e.preferences.openWith3?.bundleId&&_jsx(l.Action.Open,{title:`Open in ${e.preferences.openWith3.name}`,icon:{fileIcon:e.preferences.openWith3.path},target:e.repo.fullPath,application:e.preferences.openWith3.bundleId,shortcut:{modifiers:["shift"],key:"return"},onOpen:()=>i(e.repo)}),e.pinned&&_jsx(l.Action,{icon:l.Icon.Pin,title:"Unpin Project",shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:()=>a(e.repo)}),!e.pinned&&_jsx(l.Action,{icon:l.Icon.Pin,title:"Pin Project",shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:()=>n(e.repo)}),_jsx(l.Action.ShowInFinder,{icon:l.Icon.Finder,title:"Reveal in Finder",path:e.repo.fullPath,shortcut:{modifiers:["cmd","shift"],key:"f"}}),_jsx(l.Action.Open,{title:"Open in Terminal",target:e.repo.fullPath,icon:l.Icon.Terminal,application:"com.apple.Terminal",shortcut:{modifiers:["cmd","shift"],key:"t"},onOpen:()=>i(e.repo)}),_jsx(l.Action.OpenWith,{path:e.repo.fullPath,shortcut:{modifiers:["cmd"],key:"o"}})))}var $e=require("@raycast/api"),w=require("react"),te=require("os"),T=N(require("path")),de=N(require("fs"));var ee=require("@raycast/api"),qe=require("child_process"),Fe=require("util");var S=N(Ae(),1),Ar=S.default.v1,Lr=S.default.v3,Le=S.default.v4,qr=S.default.v5,Fr=S.default.NIL,Ur=S.default.version,$r=S.default.validate,jr=S.default.stringify,br=S.default.parse;var nr=(0,Fe.promisify)(qe.exec);async function Ue(e,t){let r=new R("all-projects"),i=[];return await Promise.allSettled(e.map(async n=>{let a=[];(t.length==0||t.includes("xcode"))&&(a=[...a,"kMDItemDisplayName == *.xcodeproj","kMDItemDisplayName == *.xcworkspace","kMDItemDisplayName == Package.swift","kMDItemDisplayName == *.playground"]),(t.length==0||t.includes("gradle"))&&(a=[...a,"kMDItemDisplayName == build.gradle"]),(t.length==0||t.includes("maven"))&&(a=[...a,"kMDItemDisplayName == pom.xml"]),(t.length==0||t.includes("node"))&&(a=[...a,"kMDItemDisplayName == package.json"]);let{stdout:c,stderr:o}=await nr(`mdfind -onlyin ${n} '${a.join(" || ")}' | grep -v "node_modules\\|META-INF"`);if(o)return(0,ee.showToast)(ee.Toast.Style.Failure,"Find Failed",o),console.error(`error: ${o}`),[];let s=c.split(`
`).filter(O=>O),P=ir(s);i=i.concat(P)})),i.sort((n,a)=>{let c=n.name.toLowerCase(),o=a.name.toLowerCase();return c<o?-1:c>o?1:0}),r.setCache(i),r.save(),i}function ir(e){return e.map(t=>{let r=Le();if(t.endsWith("package.json")){let i=t.replace("/package.json",""),n=i.split("/").pop()??"unknown";return{id:r,name:n,icon:"node-js.png",fullPath:i,type:"node"}}else if(t.endsWith("pom.xml")){let i=t.replace("/pom.xml",""),n=i.split("/").pop()??"unknown";return{id:r,name:n,icon:"maven.png",fullPath:i,type:"maven"}}else if(t.endsWith("build.gradle")){let i=t.replace("/build.gradle",""),n=i.split("/").pop()??"unknown";return{id:r,name:n,icon:"gradle.png",fullPath:i,type:"gradle"}}else if(t.endsWith(".xcodeproj")||t.endsWith(".xcworkspace")||t.endsWith("Package.swift")){let i=t.substring(0,t.lastIndexOf("/")),n=t.split("/").pop()??"unknown";return{id:r,name:n,icon:"xcode.png",fullPath:i,type:"xcode"}}else if(t.endsWith(".playground")){let i=t.split("/").pop()??"unknown";return{id:r,name:i,icon:"xcode.png",fullPath:t,type:"xcode"}}return{id:r,name:"unknown",icon:"unknown.png",fullPath:t,type:"unknown"}})}function or(e){return e.length>0&&e[0]==="~"?T.default.join((0,te.homedir)(),e.slice(1)):e}function re(e){let t=T.default.normalize(e)+T.default.sep;return(t.indexOf((0,te.homedir)())===0?t.replace((0,te.homedir)()+T.default.sep,`~${T.default.sep}`):t).slice(0,-1)}async function ar(){return(0,$e.getPreferenceValues)()}function cr(e){let t=[],r=[];return e.split(":").map(n=>{if(n=n.trim(),n.length===0)return;let a=or(n.trim());try{de.default.accessSync(a,de.default.constants.R_OK),t.push(a)}catch{r.push(n)}}),[t,r]}function je(e){let[t,r]=(0,w.useState)(),[i,n]=(0,w.useState)(),[a,c]=(0,w.useState)(!0),[o,s]=(0,w.useState)(!1),P=new R("all-projects"),O=new R("recent-projects"),I=new R("pinned-projects"),u=!1,Be=P.repos;function ne(k,m){let g=m.split(" "),_=g.filter(v=>v.startsWith("dir:")&&v.split(":").length>1)[0]?.split(":")[1],W=g.filter(v=>v.startsWith("type:")&&v.split(":").length>1)[0]?.split(":")[1],E=g.filter(v=>!v.includes(":"))[0],h=k;return _&&(h=h.filter(v=>v.fullPath.toLocaleLowerCase().includes(_.trim().toLowerCase()))),W&&(h=h.filter(v=>v.type.toLocaleLowerCase().includes(W.trim().toLowerCase()))),E&&(h=h.filter(v=>v.name.toLocaleLowerCase().includes(E.trim().toLowerCase()))),h}function pe(k){let m=k,g=O.repos,_=I.repos;e&&e.length>0&&(m=ne(m,e),g=ne(g,e),_=ne(_,e));let W=[...m].filter(E=>!g.some(h=>C(E)===C(h)));r({all:{sectionTitle:`${m.length} project${m.length!=1?"s":""} Found`,repos:W||[]},recent:g?.length>0?{sectionTitle:`Recent project${g?.length!=1?"s":""}`,repos:g||[]}:void 0,pinned:_?.length>0?{sectionTitle:`Pinned project${g?.length!=1?"s":""}`,repos:_||[]}:void 0})}return(0,w.useEffect)(()=>{async function k(){if(!(u||o)){n(void 0);try{let m=await ar();if(m.repoScanPath.length==0){n("Directories to scan has not been defined in settings");return}let[g,_]=cr(m.repoScanPath);_.length>0&&n(`Director${_.length===1?"y":"ies"} not found: ${_}`);let W=m.scanForProjectTypes.split(",").filter(h=>h.trim().length>0&&A[h.toUpperCase()]).map(h=>h.trim()),E=await Ue(g,W);u||(pe(E),s(!0))}catch(m){u||n(m)}finally{u||c(!1)}}}return pe(Be),o||k(),()=>{u=!0}},[e]),{response:t,error:i,isLoading:a}}function Je(){let e=["Search for a project","Search projects by name","Search projects by type. e.g. 'type: node'","Search projects in directory. e.g. 'dir: ajay'","Combine keywords to search. e.g. 'dir: ajay type: node'"],t=(0,d.getPreferenceValues)(),[r,i]=(0,be.useState)(),{response:n,error:a,isLoading:c}=je(r);return a&&(0,d.showToast)(d.Toast.Style.Failure,"",a),_jsx(d.List,{searchBarPlaceholder:e[Math.floor(Math.random()*e.length)],onSearchTextChange:i,isLoading:c},_jsx(d.List.Section,{title:n?.pinned?.sectionTitle},n?.pinned?.repos?.map(o=>_jsx(d.List.Item,{key:o.fullPath,id:o.id,title:o.name,icon:o.icon,accessoryTitle:re(o.fullPath),keywords:[o.name],accessoryIcon:d.Icon.Pin,actions:_jsx(U,{repo:o,preferences:t,pinned:!0})}))),_jsx(d.List.Section,{title:n?.recent?.sectionTitle},n?.recent?.repos?.map(o=>_jsx(d.List.Item,{key:o.fullPath,id:o.id,title:o.name,icon:o.icon,accessoryTitle:re(o.fullPath),keywords:[o.name],actions:_jsx(U,{repo:o,preferences:t})}))),_jsx(d.List.Section,{title:n?.all?.sectionTitle},n?.all?.repos?.map(o=>_jsx(d.List.Item,{key:o.fullPath,id:o.id,title:o.name,icon:o.icon,accessoryTitle:re(o.fullPath),keywords:[o.name],actions:_jsx(U,{repo:o,preferences:t})}))))}module.exports=Qe(sr);0&&(module.exports={});
