var ze=Object.create;var F=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Ye=Object.getOwnPropertyNames;var Ze=Object.getPrototypeOf,et=Object.prototype.hasOwnProperty;var ge=e=>F(e,"__esModule",{value:!0});var y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tt=(e,t)=>{for(var r in t)F(e,r,{get:t[r],enumerable:!0})},Pe=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Ye(t))!et.call(e,n)&&(r||n!=="default")&&F(e,n,{get:()=>t[n],enumerable:!(i=Ge(t,n))||i.enumerable});return e},k=(e,t)=>Pe(ge(F(e!=null?ze(Ze(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),rt=(e=>(t,r)=>e&&e.get(t)||(r=Pe(ge({}),t,1),e&&e.set(t,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var se=y(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.default=ct;var it=ot(require("crypto"));function ot(e){return e&&e.__esModule?e:{default:e}}var U=new Uint8Array(256),b=U.length;function ct(){return b>U.length-16&&(it.default.randomFillSync(U),b=0),U.slice(b,b+=16)}});var xe=y(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.default=void 0;var st=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;J.default=st});var A=y(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.default=void 0;var at=lt(xe());function lt(e){return e&&e.__esModule?e:{default:e}}function ut(e){return typeof e=="string"&&at.default.test(e)}var ft=ut;Q.default=ft});var N=y(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.default=void 0;var pt=dt(A());function dt(e){return e&&e.__esModule?e:{default:e}}var f=[];for(let e=0;e<256;++e)f.push((e+256).toString(16).substr(1));function ht(e,t=0){let r=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!(0,pt.default)(r))throw TypeError("Stringified UUID is invalid");return r}var yt=ht;B.default=yt});var We=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.default=void 0;var mt=Te(se()),gt=Te(N());function Te(e){return e&&e.__esModule?e:{default:e}}var Se,ae,le=0,ue=0;function Pt(e,t,r){let i=t&&r||0,n=t||new Array(16);e=e||{};let s=e.node||Se,o=e.clockseq!==void 0?e.clockseq:ae;if(s==null||o==null){let u=e.random||(e.rng||mt.default)();s==null&&(s=Se=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=ae=(u[6]<<8|u[7])&16383)}let l=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:ue+1,m=l-le+(c-ue)/1e4;if(m<0&&e.clockseq===void 0&&(o=o+1&16383),(m<0||l>le)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");le=l,ue=c,ae=o,l+=122192928e5;let p=((l&268435455)*1e4+c)%4294967296;n[i++]=p>>>24&255,n[i++]=p>>>16&255,n[i++]=p>>>8&255,n[i++]=p&255;let x=l/4294967296*1e4&268435455;n[i++]=x>>>8&255,n[i++]=x&255,n[i++]=x>>>24&15|16,n[i++]=x>>>16&255,n[i++]=o>>>8|128,n[i++]=o&255;for(let u=0;u<6;++u)n[i+u]=s[u];return t||(0,gt.default)(n)}var vt=Pt;X.default=vt});var fe=y(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.default=void 0;var _t=Rt(A());function Rt(e){return e&&e.__esModule?e:{default:e}}function xt(e){if(!(0,_t.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var St=xt;H.default=St});var pe=y(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.default=Ct;D.URL=D.DNS=void 0;var Tt=Oe(N()),Wt=Oe(fe());function Oe(e){return e&&e.__esModule?e:{default:e}}function Ot(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Ce="6ba7b810-9dad-11d1-80b4-00c04fd430c8";D.DNS=Ce;var De="6ba7b811-9dad-11d1-80b4-00c04fd430c8";D.URL=De;function Ct(e,t,r){function i(n,s,o,l){if(typeof n=="string"&&(n=Ot(n)),typeof s=="string"&&(s=(0,Wt.default)(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+n.length);if(c.set(s),c.set(n,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,o){l=l||0;for(let m=0;m<16;++m)o[l+m]=c[m];return o}return(0,Tt.default)(c)}try{i.name=e}catch{}return i.DNS=Ce,i.URL=De,i}});var Ie=y(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;var Dt=It(require("crypto"));function It(e){return e&&e.__esModule?e:{default:e}}function wt(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Dt.default.createHash("md5").update(e).digest()}var Mt=wt;V.default=Mt});var Me=y(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.default=void 0;var Lt=we(pe()),qt=we(Ie());function we(e){return e&&e.__esModule?e:{default:e}}var Et=(0,Lt.default)("v3",48,qt.default),jt=Et;z.default=jt});var qe=y(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.default=void 0;var kt=Le(se()),At=Le(N());function Le(e){return e&&e.__esModule?e:{default:e}}function Nt(e,t,r){e=e||{};let i=e.random||(e.rng||kt.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=i[n];return t}return(0,At.default)(i)}var Ft=Nt;G.default=Ft});var Ee=y(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.default=void 0;var Kt=$t(require("crypto"));function $t(e){return e&&e.__esModule?e:{default:e}}function bt(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Kt.default.createHash("sha1").update(e).digest()}var Ut=bt;Y.default=Ut});var ke=y(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.default=void 0;var Jt=je(pe()),Qt=je(Ee());function je(e){return e&&e.__esModule?e:{default:e}}var Bt=(0,Jt.default)("v5",80,Qt.default),Xt=Bt;Z.default=Xt});var Ae=y(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.default=void 0;var Ht="00000000-0000-0000-0000-000000000000";ee.default=Ht});var Ne=y(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.default=void 0;var Vt=zt(A());function zt(e){return e&&e.__esModule?e:{default:e}}function Gt(e){if(!(0,Vt.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Yt=Gt;te.default=Yt});var Fe=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});Object.defineProperty(R,"v1",{enumerable:!0,get:function(){return Zt.default}});Object.defineProperty(R,"v3",{enumerable:!0,get:function(){return er.default}});Object.defineProperty(R,"v4",{enumerable:!0,get:function(){return tr.default}});Object.defineProperty(R,"v5",{enumerable:!0,get:function(){return rr.default}});Object.defineProperty(R,"NIL",{enumerable:!0,get:function(){return nr.default}});Object.defineProperty(R,"version",{enumerable:!0,get:function(){return ir.default}});Object.defineProperty(R,"validate",{enumerable:!0,get:function(){return or.default}});Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return cr.default}});Object.defineProperty(R,"parse",{enumerable:!0,get:function(){return sr.default}});var Zt=O(We()),er=O(Me()),tr=O(qe()),rr=O(ke()),nr=O(Ae()),ir=O(Ne()),or=O(A()),cr=O(N()),sr=O(fe());function O(e){return e&&e.__esModule?e:{default:e}}});var gr={};tt(gr,{default:()=>He});var _=require("@raycast/api"),Xe=require("react");var a=require("@raycast/api");var oe=require("@raycast/api"),ve=k(require("path")),M=k(require("fs"));function C(e){return`${e.fullPath}/${e.name}~${e.type}`}function K(e,t){return t[e]!==void 0}function $(e,t){return t[e]||t.openDefaultWith}var S=class{constructor(t){nt(),this.cacheFile=ve.default.join(oe.environment.supportPath,t+".json"),this.repos=[];try{M.default.accessSync(this.cacheFile,M.default.constants.R_OK)}catch{return}let r=M.default.readFileSync(this.cacheFile).toString();if(r.length>0){let i=JSON.parse(r);this.repos=i.repos}}save(){let t=JSON.stringify(this,null,2)+`
`;M.default.writeFileSync(this.cacheFile,t)}setCache(t){this.repos=t}clear(){this.repos=[],this.save()}addToCache(t){this.repos=this.repos.filter(r=>C(r)!==C(t)),this.repos.push(t)}removeFromCache(t){this.repos=this.repos.filter(r=>C(r)!==C(t))}};function nt(){M.default.mkdirSync(oe.environment.supportPath,{recursive:!0})}function Re(e){let t=new S("recent-projects"),r=new S("pinned-projects");function i(o){t.addToCache(o),t.save()}function n(o){r.addToCache(o),r.save(),(0,a.showToast)(a.Toast.Style.Success,"","Repo pinned.")}function s(o){r.removeFromCache(o),r.save(),(0,a.showToast)(a.Toast.Style.Success,"","Repo un-pinned.")}return _jsx(a.ActionPanel,null,_jsx(a.ActionPanel.Section,null,_jsx(a.Action.Open,{title:`Open in ${$(e.repo.openWithKey,e.preferences).name}`,icon:{fileIcon:$(e.repo.openWithKey,e.preferences).path},target:e.repo.fullPath,application:$(e.repo.openWithKey,e.preferences).bundleId,onOpen:()=>i(e.repo)}),_jsx(a.Action.Open,{title:`Open in ${e.preferences.openDefaultWith.name}`,icon:{fileIcon:e.preferences.openDefaultWith.path},target:e.repo.fullPath,application:e.preferences.openDefaultWith.bundleId,shortcut:{modifiers:["opt"],key:"return"},onOpen:()=>i(e.repo)}),e.preferences.openWith2&&_jsx(a.Action.Open,{title:`Open in ${e.preferences.openWith2.name}`,icon:{fileIcon:e.preferences.openWith2.path},target:e.repo.fullPath,application:e.preferences.openWith2.bundleId,shortcut:{modifiers:["ctrl"],key:"return"},onOpen:()=>i(e.repo)}),e.preferences.openWith3&&e.preferences.openWith2?.bundleId!=e.preferences.openWith3?.bundleId&&_jsx(a.Action.Open,{title:`Open in ${e.preferences.openWith3.name}`,icon:{fileIcon:e.preferences.openWith3.path},target:e.repo.fullPath,application:e.preferences.openWith3.bundleId,shortcut:{modifiers:["shift"],key:"return"},onOpen:()=>i(e.repo)}),e.listType=="pinned"&&_jsx(a.Action,{icon:a.Icon.Pin,title:"Unpin Project",shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:()=>s(e.repo)}),e.listType!=="pinned"&&_jsx(a.Action,{icon:a.Icon.Pin,title:"Pin Project",shortcut:{modifiers:["cmd","shift"],key:"p"},onAction:()=>n(e.repo)}),_jsx(a.Action.ShowInFinder,{icon:a.Icon.Finder,title:"Reveal in Finder",path:e.repo.fullPath,shortcut:{modifiers:["cmd","shift"],key:"f"}}),_jsx(a.Action.Open,{title:"Open in Terminal",target:e.repo.fullPath,icon:a.Icon.Terminal,application:"com.apple.Terminal",shortcut:{modifiers:["cmd","shift"],key:"t"},onOpen:()=>i(e.repo)}),_jsx(a.Action.OpenWith,{path:e.repo.fullPath,shortcut:{modifiers:["cmd"],key:"o"}})))}var Je=require("@raycast/api"),I=require("react"),ne=require("os"),q=k(require("path")),ye=k(require("fs"));var re=require("@raycast/api"),Ke=require("child_process"),$e=require("util");var T=k(Fe(),1),Qr=T.default.v1,Br=T.default.v3,de=T.default.v4,Xr=T.default.v5,Hr=T.default.NIL,Vr=T.default.version,zr=T.default.validate,Gr=T.default.stringify,Yr=T.default.parse;var ar=["Search for a project","Search projects by name","Search projects by type. e.g. 'type: node'","Search projects in directory. e.g. 'dir: ajay'","Combine keywords to search. e.g. 'dir: ajay type: node'","Exclude projects types by selecting '-' in preferences"],lr=[{type:"node",finder:"package.json",finderType:"file",icon:"node-js.png",spotlightQuery:["kMDItemDisplayName == package.json"],openWithKey:"openNodeWith"},{type:"gradle",finder:"build.gradle",finderType:"file",icon:"gradle.png",spotlightQuery:["kMDItemDisplayName == build.gradle"],openWithKey:"openGradleWith"},{type:"maven",finder:"pom.xml",finderType:"file",icon:"maven.png",spotlightQuery:["kMDItemDisplayName == pom.xml"],openWithKey:"openMavenWith"},{type:"xcode",finder:".xcodeproj",finderType:"extension",icon:"xcode.png",spotlightQuery:["kMDItemDisplayName == *.xcodeproj"],openWithKey:"openXcodeWith"},{type:"xcode",finder:".xcworkspace",finderType:"extension",icon:"xcode.png",spotlightQuery:["kMDItemDisplayName == *.xcworkspace"],openWithKey:"openXcodeWith"},{type:"xcode",finder:"Package.swift",finderType:"extension",icon:"xcode.png",spotlightQuery:["kMDItemDisplayName == Package.swift"],openWithKey:"openXcodeWith"},{type:"xcode",finder:".playground",finderType:"extension",icon:"xcode.png",spotlightQuery:["kMDItemDisplayName == *.playground"],openWithKey:"openXcodeWith",singleFileProject:!0},{type:"tauri",finder:"tauri.conf.json",finderType:"file",icon:"tauri-app.png",spotlightQuery:["kMDItemDisplayName == tauri.conf.json"],openWithKey:"openTauriWith"},{type:"wails",finder:"project.json",finderType:"file",icon:"wails-app.png",spotlightQuery:["kMDItemDisplayName == project.json"],openWithKey:"openWailsWith"}],L={searchPlaceholders:ar,projectTypes:lr};var ur=(0,$e.promisify)(Ke.exec);async function be(e,t){let r=new S("all-projects"),i=[],n=L.projectTypes.filter(s=>K(s.openWithKey,t));return await Promise.allSettled(e.map(async s=>{let o=[];n.forEach(x=>{o=[...o,...x.spotlightQuery]});let{stdout:l,stderr:c}=await ur(`mdfind -onlyin ${s} '${o.join(" || ")}' | grep -v "node_modules\\|META-INF"`);if(c)return(0,re.showToast)(re.Toast.Style.Failure,"Find Failed",c),console.error(`error: ${c}`),[];let m=l.split(`
`).filter(x=>x),p=fr(m,n);i=i.concat(p)})),i.sort((s,o)=>{let l=s.name.toLowerCase(),c=o.name.toLowerCase();return l<c?-1:l>c?1:0}),r.setCache(i),r.save(),i}function fr(e,t){let r=[];return e.forEach(i=>{t.forEach(n=>{i.endsWith(n.finder)&&(n.finderType==="file"?r.push(pr(i,n)):n.finderType==="extension"&&r.push(dr(i,n)))})}),r}var pr=(e,t)=>{let r=de(),i=Ue(e,t),n=i.split("/").pop()??"unknown";return{id:r,name:n,icon:t.icon,fullPath:i,type:t.type,openWithKey:t.openWithKey}},dr=(e,t)=>{let r=de(),i=Ue(e,t),n=e.split("/").pop()??"unknown";return{id:r,name:n,icon:t.icon,fullPath:i,type:t.type,openWithKey:t.openWithKey}},Ue=(e,t)=>t.singleFileProject?e:e.replace(`/${t.finder}`,"");function hr(e){return e.length>0&&e[0]==="~"?q.default.join((0,ne.homedir)(),e.slice(1)):e}function Qe(e){let t=q.default.normalize(e)+q.default.sep;return(t.indexOf((0,ne.homedir)())===0?t.replace((0,ne.homedir)()+q.default.sep,`~${q.default.sep}`):t).slice(0,-1)}async function yr(){return(0,Je.getPreferenceValues)()}function mr(e){let t=[],r=[];return e.split(":").map(n=>{if(n=n.trim(),n.length===0)return;let s=hr(n.trim());try{ye.default.accessSync(s,ye.default.constants.R_OK),t.push(s)}catch{r.push(n)}}),[t,r]}function Be(e){let[t,r]=(0,I.useState)(),[i,n]=(0,I.useState)(),[s,o]=(0,I.useState)(!0),[l,c]=(0,I.useState)(!1),m=new S("all-projects"),p=new S("recent-projects"),x=new S("pinned-projects"),u=!1,Ve=m.repos,E=[];function ie(j,d){let h=d.split(" "),P=h.filter(v=>v.startsWith("dir:")&&v.split(":").length>1)[0]?.split(":")[1],w=h.filter(v=>v.startsWith("type:")&&v.split(":").length>1)[0]?.split(":")[1],g=h.filter(v=>!v.includes(":"))[0],W=j;return P&&(W=W.filter(v=>v.fullPath.toLocaleLowerCase().includes(P.trim().toLowerCase()))),w&&(W=W.filter(v=>v.type.toLocaleLowerCase().includes(w.trim().toLowerCase()))),g&&(W=W.filter(v=>v.name.toLocaleLowerCase().includes(g.trim().toLowerCase()))),W}function me(j){let d=j,h=p.repos,P=x.repos;E?.length>0&&(d=d.filter(g=>E.includes(g.type)),h=h.filter(g=>E.includes(g.type)),P=P.filter(g=>E.includes(g.type))),e&&e.length>0&&(d=ie(d,e),h=ie(h,e),P=ie(P,e));let w=[...d].filter(g=>!h.some(W=>C(g)===C(W)));r({all:{sectionTitle:`${d.length} project${d.length!=1?"s":""} Found`,repos:w||[]},recent:h?.length>0?{sectionTitle:`Recent project${h?.length!=1?"s":""}`,repos:h||[]}:void 0,pinned:P?.length>0?{sectionTitle:`Pinned project${h?.length!=1?"s":""}`,repos:P||[]}:void 0})}return(0,I.useEffect)(()=>{async function j(){if(!(u||l)){n(void 0);try{let d=await yr();if(d.repoScanPath.length==0){n("Directories to scan has not been defined in settings");return}let[h,P]=mr(d.repoScanPath);P.length>0&&n(`Director${P.length===1?"y":"ies"} not found: ${P}`);let w=await be(h,d);E=L.projectTypes.filter(g=>K(g.openWithKey,d)).map(g=>g.type),u||(me(w),c(!0))}catch(d){u||n(d)}finally{u||o(!1)}}}return me(Ve),l||j(),()=>{u=!0}},[e]),{response:t,error:i,isLoading:s}}function He(){let e=L.searchPlaceholders,t=(0,_.getPreferenceValues)(),[r,i]=(0,Xe.useState)(),{response:n,error:s,isLoading:o}=Be(r);s&&(0,_.showToast)(_.Toast.Style.Failure,"",s);let l=(c,m)=>_jsx(_.List.Section,{title:m?.sectionTitle},m?.repos?.map(p=>_jsx(_.List.Item,{key:p.fullPath,id:`${c}:${p.id}`,title:p.name,icon:p.icon,accessoryTitle:Qe(p.fullPath),keywords:[p.name],accessoryIcon:c=="pinned"?_.Icon.Pin:"",actions:_jsx(Re,{repo:p,preferences:t,listType:c})})));return _jsx(_.List,{searchBarPlaceholder:e[Math.floor(Math.random()*e.length)],onSearchTextChange:i,isLoading:o},n?.pinned&&l("pinned",n?.pinned),n?.recent&&l("recent",n?.recent),n?.all&&l("all",n?.all))}module.exports=rt(gr);0&&(module.exports={});
